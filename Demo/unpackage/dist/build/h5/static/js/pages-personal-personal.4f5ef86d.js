(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-personal-personal"],{"01e3":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'.uni-mask[data-v-1e63699a]{position:fixed;z-index:998;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.3)}.uni-popup[data-v-1e63699a]{position:fixed;z-index:999;background-color:#fff}.uni-popup-middle[data-v-1e63699a]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.uni-popup-middle.uni-popup-insert[data-v-1e63699a]{min-width:%?380?%;min-height:%?380?%;max-width:100%;max-height:80%;-webkit-transform:translate(-50%,-65%);-ms-transform:translate(-50%,-65%);transform:translate(-50%,-65%);background:none;-webkit-box-shadow:none;box-shadow:none}.uni-popup-middle.uni-popup-fixed[data-v-1e63699a]{-webkit-border-radius:%?10?%;border-radius:%?10?%;padding:%?30?%}.uni-close-bottom[data-v-1e63699a],.uni-close-right[data-v-1e63699a]{position:absolute;bottom:%?-180?%;text-align:center;-webkit-border-radius:50%;border-radius:50%;color:#f5f5f5;font-size:%?60?%;font-weight:700;opacity:.8;z-index:-1}.uni-close-bottom[data-v-1e63699a]{margin:auto;left:0;right:0}.uni-close-right[data-v-1e63699a]{right:%?-60?%;top:%?-80?%}.uni-close-bottom[data-v-1e63699a]:after{content:"";position:absolute;width:0;border:1px #f5f5f5 solid;top:%?-200?%;bottom:%?56?%;left:50%;-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%);opacity:.8}.uni-popup-top[data-v-1e63699a]{top:0;left:0;width:100%;height:%?100?%;line-height:%?100?%;text-align:center}.uni-popup-bottom[data-v-1e63699a]{left:0;bottom:0;width:100%;min-height:%?100?%;line-height:%?100?%;text-align:center}',""])},"0b23":function(t,e,n){"use strict";n.r(e);var a=n("481c"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=o.a},"15aa":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("div",{staticClass:" content_wrap"},[n("div",{staticClass:"col_justify_center head_wrap",on:{click:function(e){e=t.$handleEvent(e),t.changeHeadImg(e)}}},[n("div",{staticClass:"row_between"},[n("span",[t._v("头像")]),n("div",{staticClass:"row"},[n("img",{staticClass:"top-img",attrs:{src:t.headImg}}),n("span",{staticClass:"arraw",staticStyle:{"margin-left":"19px"}})])])]),n("div",{staticClass:"col_justify_center item_wrap"},[n("div",{staticClass:"row_between item"},[n("span",[t._v("昵称")]),n("div",{staticClass:"row"},[n("v-uni-input",{staticClass:"item_name name",staticStyle:{border:"0","margin-bottom":"0"},attrs:{type:"text"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1)])]),n("div",{staticClass:"col_justify_center item_wrap"},[n("div",{staticClass:"row_between item"},[n("span",[t._v("联系方式")]),n("div",{staticClass:"row_center"},[1==t.is_vip?n("v-uni-input",{staticClass:"item_name mobile",model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}):n("v-uni-input",{staticClass:"item_name mobile",attrs:{disabled:"disabled"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)])]),n("div",{staticClass:"col_justify_center item_wrap",staticStyle:{"border-bottom":"1upx solid #E3E3E3"},attrs:{id:"bind"}},[n("div",{staticClass:"row_between item",on:{click:function(e){e=t.$handleEvent(e),t.bindCompany("middle")}}},[n("span",[t._v("企业号")]),n("div",{staticClass:"row"},[n("span",{staticClass:"item_name un_active wx_openid"},[t._v(t._s(t.companyCode?t.companyCode:"未绑定"))]),n("span",{staticClass:"arraw"})])]),n("uni-popup",{attrs:{show:"middle"===t.type,position:"middle",mode:"fixed"},on:{hidePopup:function(e){e=t.$handleEvent(e),t.bindCompany("")}}},[n("div",{staticClass:"company-modal"},[n("div",{staticClass:"modal-title"},[t._v("绑定企业")]),n("div",{staticClass:"company-code"},[n("v-uni-input",{attrs:{type:"text",placeholder:"输入企业号"},on:{input:function(e){e=t.$handleEvent(e),t.companyChange(e)}},model:{value:t.companyCode,callback:function(e){t.companyCode=e},expression:"companyCode"}})],1),n("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){e=t.$handleEvent(e),t.bindCompanyCode()}}},[t._v("提交")])],1)])],1),n("div",{staticStyle:{"background-color":"#FFFFFF","padding-top":"60upx"}},[n("v-uni-button",{staticClass:" button",staticStyle:{color:"#FFFFFF!important","background-color":"#107EFF","margin-top":"2upx"},attrs:{"hover-class":"hover_class"},on:{click:function(e){e=t.$handleEvent(e),t.updateInfo(e)}}},[t._v("更新")]),n("v-uni-button",{staticClass:" button",attrs:{"hover-class":"hover_class"},on:{click:function(e){e=t.$handleEvent(e),t.loginOut(e)}}},[t._v("退出")])],1)])])},o=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})},"1a43":function(t,e,n){"use strict";var a=n("fd70"),o=n.n(a);o.a},"363c":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"body[data-v-a52475bc]{background-color:#fff}.company-modal[data-v-a52475bc]{width:%?500?%;text-align:center}.company-code[data-v-a52475bc]{padding:%?30?% 0 %?30?% 0}.company-code uni-input[data-v-a52475bc]{border:1px solid #eee;text-align:left;padding:%?20?%}.content_wrap[data-v-a52475bc]{font-size:%?28?%;color:#333;background-color:#e3e3e3;width:100%}.head_wrap[data-v-a52475bc]{height:%?160?%;margin-top:%?16?%;background-color:#fff;padding:0 %?32?%}.head_wrap span[data-v-a52475bc]:first-child{color:#333;font-size:%?28?%}.head_wrap img[data-v-a52475bc]{width:%?88?%;height:%?88?%;-webkit-border-radius:50%;border-radius:50%}.arraw[data-v-a52475bc]{width:%?20?%;height:%?20?%;border-top:%?2?% solid #999;border-right:%?2?% solid #999;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);margin-left:%?2?%}.item_wrap[data-v-a52475bc]{height:%?100?%;background-color:#fff;padding:0 %?32?%}.item[data-v-a52475bc]{height:%?100?%;border-top:%?2?% solid #e3e3e3}.item_name[data-v-a52475bc]{color:#666}.item img[data-v-a52475bc]{width:%?36?%;height:%?30?%;margin-right:%?16?%}.un_active[data-v-a52475bc]{color:#ccc}uni-input[data-v-a52475bc]{margin-bottom:0;border:none;background:rgba(0,0,0,0);text-align:right;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.button[data-v-a52475bc]{-webkit-border-radius:%?6?%;border-radius:%?6?%;width:100%;margin:%?60?% 5% 0;-webkit-box-sizing:border-box;box-sizing:border-box;font-size:%?32?%;width:90%;height:%?80?%;line-height:%?80?%;padding:0;border:%?2?% solid #107eff!important;color:#107eff!important;background-color:#e3e3e3}",""])},"36ba":function(t,e,n){"use strict";var a=n("c9cb"),o=n.n(a);o.a},"481c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"UniPopup",props:{show:{type:Boolean,default:!1},position:{type:String,default:"middle"},mode:{type:String,default:"insert"},msg:{type:String,default:""},h5Top:{type:Boolean,default:!1},buttonMode:{type:String,default:"bottom"}},data:function(){return{offsetTop:0}},watch:{h5Top:function(t){this.offsetTop=t?44:0}},created:function(){var t=0;t=this.h5Top?0:44,this.offsetTop=t},methods:{hide:function(){"insert"===this.mode&&"middle"===this.position||this.$emit("hidePopup")},closeMask:function(){"insert"===this.mode&&this.$emit("hidePopup")},moveHandle:function(){}}};e.default=a},"6e94":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"uni-mask",style:{top:t.offsetTop+"px"},on:{click:function(e){e=t.$handleEvent(e),t.hide(e)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),e=t.$handleEvent(e),t.moveHandle(e)}}}),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"uni-popup",class:"uni-popup-"+t.position+" uni-popup-"+t.mode},[t._v(t._s(t.msg)),t._t("default"),"middle"===t.position&&"insert"===t.mode?n("v-uni-view",{staticClass:" uni-icon uni-icon-close",class:{"uni-close-bottom":"bottom"===t.buttonMode,"uni-close-right":"right"===t.buttonMode},on:{click:function(e){e=t.$handleEvent(e),t.closeMask(e)}}}):t._e()],2)],1)},o=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})},9125:function(t,e,n){"use strict";n.r(e);var a=n("f7cc"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=o.a},a34a:function(t,e,n){t.exports=n("bbdd")},b727:function(t,e,n){"use strict";n.r(e);var a=n("15aa"),o=n("9125");for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);n("36ba");var r=n("2877"),s=Object(r["a"])(o["default"],a["a"],a["b"],!1,null,"a52475bc",null);e["default"]=s.exports},bbdd:function(t,e,n){var a=function(){return this||"object"===typeof self&&self}()||Function("return this")(),o=a.regeneratorRuntime&&Object.getOwnPropertyNames(a).indexOf("regeneratorRuntime")>=0,i=o&&a.regeneratorRuntime;if(a.regeneratorRuntime=void 0,t.exports=n("96cf"),o)a.regeneratorRuntime=i;else try{delete a.regeneratorRuntime}catch(r){a.regeneratorRuntime=void 0}},c9cb:function(t,e,n){var a=n("363c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("85bb83e6",a,!0,{sourceMap:!1,shadowMode:!1})},dfb6:function(t,e,n){"use strict";n.r(e);var a=n("6e94"),o=n("0b23");for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);n("1a43");var r=n("2877"),s=Object(r["a"])(o["default"],a["a"],a["b"],!1,null,"1e63699a",null);e["default"]=s.exports},f7cc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n("a34a")),o=n("9797"),i=r(n("dfb6"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,a,o,i,r){try{var s=t[i](r),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(a,o)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(a,o){var i=t.apply(e,n);function r(t){s(i,a,o,r,u,"next",t)}function u(t){s(i,a,o,r,u,"throw",t)}r(void 0)})}}var c={components:{uniPopup:i.default},data:function(){return{type:"",companyCode:"",loginStatus:0,headImg:"../../static/img/mtyou_icon.png",userName:"",phone:"",is_vip:0}},onLoad:function(){var t=uni.getStorageSync("userInfo");this.userName=t.userName,this.phone=t.phone,this.is_vip=parseInt(t.is_vip)},onShow:function(){var t=uni.getStorageSync("userInfo").companyCode;t&&(this.companyCode=t);var e=uni.getStorageSync("userInfo").userImage;this.headImg=e,this.headImg||(this.headImg="../../static/img/mtyou_icon.png")},methods:{updateUserInfo:function(){var t=u(a.default.mark(function t(e){var n,i;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n={userID:uni.getStorageSync("userInfo").userID,userName:this.userName,userImage:e},t.next=3,(0,o.updateUserInfo)(n);case 3:i=t.sent,i.status;case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),deleteQyCompany:function(){var t=u(a.default.mark(function t(){var e,n;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=uni.getStorageSync("userInfo"),t.next=3,(0,o.deleteQyCompany)({userID:e.userID,companyCode:this.companyCode});case 3:n=t.sent,uni.showToast({icon:"none",title:n.message,duration:1e3}),1==n.status&&(this.companyCode="",uni.setStorageSync("userInfo",n.data.userInfo));case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),bindCompanyCode:function(){var t=u(a.default.mark(function t(){var e,n;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.companyCode){t.next=3;break}return uni.showToast({icon:"none",title:"请输入企业号",duration:1e3}),t.abrupt("return");case 3:return console.log(this.companyCode),e=uni.getStorageSync("userInfo"),t.next=7,(0,o.addQycompany)({userID:e.userID,companyCode:this.companyCode});case 7:n=t.sent,console.log(n),1==n.status?(this.type="",uni.setStorageSync("userInfo",n.data.userInfo),uni.showToast({icon:"none",title:n.message,duration:1e3})):uni.showToast({icon:"none",title:n.message,duration:1e3});case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),companyChange:function(t){},bindCompany:function(t){if(""==this.companyCode)this.type=t;else{var e=this;uni.showModal({title:"提示",content:"是否解除企业绑定？",confirmText:"确定",cancelText:"取消",success:function(t){t.confirm&&(console.log("用户点击确定"),e.deleteQyCompany())}})}},loginOut:function(){var t=u(a.default.mark(function t(){var e,n;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=uni.getStorageSync("userInfo").userID,console.log(e),t.next=4,(0,o.logout)(e);case 4:n=t.sent,1==n.status&&(uni.removeStorageSync("userInfo"),uni.navigateBack({delta:1}));case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),updateInfo:function(){var t=u(a.default.mark(function t(){var e,n;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.userName){t.next=3;break}return uni.showToast({icon:"none",title:"请输入正确的用户名",duration:1e3}),t.abrupt("return");case 3:return e={userID:uni.getStorageSync("userInfo").userID,userName:this.userName,phone:this.phone},t.next=6,(0,o.updateUserInfo)(e);case 6:n=t.sent,1==n.status&&(uni.setStorageSync("userInfo",n.data.userInfo),uni.showToast({icon:"none",title:"更新成功",duration:1e3}),setTimeout(function(){uni.navigateBack({delta:1})},1e3));case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),changeHeadImg:function(){uni.chooseImage({sourceType:["camera","album"],sizeType:["compressed"],count:1,success:function(t){uni.navigateTo({url:"/pages/crop/crop?image="+t.tempFilePaths[0]})}})}}};e.default=c},fd70:function(t,e,n){var a=n("01e3");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("673fe2a5",a,!0,{sourceMap:!1,shadowMode:!1})}}]);