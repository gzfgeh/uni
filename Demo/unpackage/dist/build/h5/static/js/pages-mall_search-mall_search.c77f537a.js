(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mall_search-mall_search"],{"0a4a":function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"search-keyword",on:{touchstart:function(t){t=e.$handleEvent(t),e.blur(t)}}},[i("v-uni-scroll-view",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"keyword-box",attrs:{"scroll-y":""}},[e.oldKeywordList.length>0?i("v-uni-view",{staticClass:"keyword-block"},[i("v-uni-view",{staticClass:"keyword-list-header"},[i("v-uni-view",[e._v("历史搜索")]),i("v-uni-view",[i("v-uni-image",{attrs:{src:"/static/HM-search/delete.png"},on:{click:function(t){t=e.$handleEvent(t),e.oldDelete(t)}}})],1)],1),i("v-uni-view",{staticClass:"keyword"},e._l(e.oldKeywordList,function(t,o){return i("v-uni-view",{key:o,on:{click:function(i){i=e.$handleEvent(i),e.doSearch(t)}}},[e._v(e._s(t))])}),1)],1):e._e(),i("v-uni-view",{staticClass:"keyword-block"},[i("v-uni-view",{staticClass:"keyword-list-header"},[i("v-uni-view",[e._v("热门搜索")]),i("v-uni-view",[i("v-uni-image",{attrs:{src:"/static/HM-search/attention"+e.forbid+".png"},on:{click:function(t){t=e.$handleEvent(t),e.hotToggle(t)}}})],1)],1),""==e.forbid?i("v-uni-view",{staticClass:"keyword"},e._l(e.hotKeywordList,function(t,o){return i("v-uni-view",{key:o,on:{click:function(i){i=e.$handleEvent(i),e.doSearch(t)}}},[e._v(e._s(t))])}),1):i("v-uni-view",{staticClass:"hide-hot-tis"},[i("v-uni-view",[e._v("当前搜热门搜索已隐藏")])],1)],1)],1),e._l(e.list,function(t,o){return[i("v-uni-navigator",{key:o+"_0",staticClass:"search_item",on:{click:function(t){t=e.$handleEvent(t),e.goToDetail(o)}}},[i("v-uni-text",[e._v(e._s(t.name))])],1)]})],2)],1)},n=[];i.d(t,"a",function(){return o}),i.d(t,"b",function(){return n})},"2a00":function(e,t,i){"use strict";i.r(t);var o=i("6a32"),n=i.n(o);for(var a in o)"default"!==a&&function(e){i.d(t,e,function(){return o[e]})}(a);t["default"]=n.a},"51b6":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,"uni-view[data-v-11f403c5]{display:block}.placeholder-class[data-v-11f403c5]{color:#9e9e9e}.search-keyword[data-v-11f403c5]{width:100%;background-color:#f2f2f2}.keyword-list-box[data-v-11f403c5]{height:-webkit-calc(100vh - %?110?%);height:calc(100vh - %?110?%);padding-top:%?10?%;-webkit-border-radius:%?20?% %?20?% 0 0;border-radius:%?20?% %?20?% 0 0;background-color:#fff}.keyword-entry-tap[data-v-11f403c5]{background-color:#eee}.keyword-box[data-v-11f403c5]{height:-webkit-calc(100vh - %?110?%);height:calc(100vh - %?110?%);-webkit-border-radius:%?20?% %?20?% 0 0;border-radius:%?20?% %?20?% 0 0;background-color:#fff}.keyword-box .keyword-block[data-v-11f403c5]{padding:%?10?% 0}.keyword-box .keyword-block .keyword-list-header[data-v-11f403c5]{width:94%;padding:%?10?% 3%;font-size:%?27?%;color:#333;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.keyword-box .keyword-block .keyword-list-header uni-image[data-v-11f403c5]{width:%?40?%;height:%?40?%}.keyword-box .keyword-block .keyword[data-v-11f403c5]{width:94%;padding:3px 3%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}.keyword-box .keyword-block .hide-hot-tis[data-v-11f403c5]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-size:%?28?%;color:#6b6b6b}.keyword-box .keyword-block .keyword>uni-view[data-v-11f403c5]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:%?60?%;border-radius:%?60?%;padding:0 %?20?%;margin:%?10?% %?20?% %?10?% 0;height:%?60?%;font-size:%?28?%;background-color:#f2f2f2;color:#6b6b6b}.search_item[data-v-11f403c5]{padding:%?20?%;border-bottom:#e3e3e3 solid %?2?%;background:#fff}",""])},"6a32":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(i("a34a")),n=i("9797");function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i,o,n,a,r){try{var s=e[a](r),l=s.value}catch(d){return void i(d)}s.done?t(l):Promise.resolve(l).then(o,n)}function s(e){return function(){var t=this,i=arguments;return new Promise(function(o,n){var a=e.apply(t,i);function s(e){r(a,o,n,s,l,"next",e)}function l(e){r(a,o,n,s,l,"throw",e)}s(void 0)})}}var l={data:function(){return{defaultKeyword:"",keyword:"",oldKeywordList:[],hotKeywordList:[],keywordList:[],forbid:"",isShowKeywordList:!1,list:[],searchType:1}},onNavigationBarButtonTap:function(e){console.log(e);var t=this.$mp.page.$getAppWebview(),i=t.getTitleNViewSearchInputText();console.log(i)},onNavigationBarSearchInputChanged:function(e){console.log(e.text),this.inputChange(e)},onNavigationBarSearchInputConfirmed:function(e){console.log(e.text),this.doSearch(e.text)},onLoad:function(e){this.type=e.type,1==this.type?this.isShowKeywordList=!0:this.init()},methods:{goToDetail:function(e){this.list[e].price?uni.navigateTo({url:"../mall_detail/mall_detail?goodsID="+this.list[e].id}):uni.navigateTo({url:"../mall_shop/mall_shop?storeID="+this.list[e].id})},init:function(){this.loadDefaultKeyword(),this.loadOldKeyword(),this.loadHotKeyword()},blur:function(){uni.hideKeyboard()},loadDefaultKeyword:function(){this.defaultKeyword="默认关键字"},loadOldKeyword:function(){var e=this;uni.getStorage({key:"OldKeys",success:function(t){var i=JSON.parse(t.data);e.oldKeywordList=i}})},loadHotKeyword:function(){this.hotKeywordList=["键盘","鼠标","显示器","电脑主机","蓝牙音箱","笔记本电脑","鼠标垫","USB","USB3.0"]},inputChange:function(e){var t=e.text;if(console.log(t),!t)return this.keywordList=[],void(this.isShowKeywordList=!1);this.isShowKeywordList=!0,this.search(2,t)},search:function(){var e=s(o.default.mark(function e(t,i){var a,r;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a={searchType:t,keyword:i,page:1,limit:20},e.next=3,(0,n.search)(a);case 3:r=e.sent,1==r.status&&(2==t?(this.list=r.data,this.search(1,i)):this.list=this.list.concat(r.data));case 5:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}(),drawCorrelativeKeyword:function(e,t){for(var i=e.length,o=[],n=0;n<i;n++){var a=e[n],r=a[0].replace(t,"<span style='color: #9f9f9f;'>"+t+"</span>");r="<div>"+r+"</div>";var s={keyword:a[0],htmlStr:r};o.push(s)}return o},setkeyword:function(e){this.keyword=e.keyword},oldDelete:function(){var e=this;uni.showModal({content:"确定清除历史搜索记录？",success:function(t){t.confirm?(console.log("用户点击确定"),e.oldKeywordList=[],uni.removeStorage({key:"OldKeys"})):t.cancel&&console.log("用户点击取消")}})},hotToggle:function(){this.forbid=this.forbid?"":"_forbid"},doSearch:function(e){e=e||(this.keyword?this.keyword:this.defaultKeyword),this.keyword=e,this.saveKeyword(e),uni.navigateTo({url:"../mall_list/mall_list?keyword="+e})},saveKeyword:function(e){var t=this;uni.getStorage({key:"OldKeys",success:function(i){console.log(i.data);var o=JSON.parse(i.data),n=o.indexOf(e);-1==n?o.unshift(e):(o.splice(n,1),o.unshift(e)),o.length>10&&o.pop(),uni.setStorageSync("OldKeys",JSON.stringify(o)),t.oldKeywordList=o,console.log(e),uni.navigateTo({url:"../mall_list/mall_list?keyword="+e})},fail:function(i){var o=[e];uni.setStorage({key:"OldKeys",data:JSON.stringify(o)}),t.oldKeywordList=o}})}}};t.default=l},"81ae":function(e,t,i){"use strict";var o=i("ba10"),n=i.n(o);n.a},a34a:function(e,t,i){e.exports=i("bbdd")},ba10:function(e,t,i){var o=i("51b6");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=i("4f06").default;n("63b1ac48",o,!0,{sourceMap:!1,shadowMode:!1})},bbdd:function(e,t,i){var o=function(){return this||"object"===typeof self&&self}()||Function("return this")(),n=o.regeneratorRuntime&&Object.getOwnPropertyNames(o).indexOf("regeneratorRuntime")>=0,a=n&&o.regeneratorRuntime;if(o.regeneratorRuntime=void 0,e.exports=i("96cf"),n)o.regeneratorRuntime=a;else try{delete o.regeneratorRuntime}catch(r){o.regeneratorRuntime=void 0}},d542:function(e,t,i){"use strict";i.r(t);var o=i("0a4a"),n=i("2a00");for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);i("81ae");var r=i("2877"),s=Object(r["a"])(n["default"],o["a"],o["b"],!1,null,"11f403c5",null);t["default"]=s.exports}}]);