(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-service_form-service_form"],{"381b":function(e,t,i){"use strict";i.r(t);var a=i("81e4"),r=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,function(){return a[e]})}(n);t["default"]=r.a},"5a5b":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("div",{staticClass:"mui-content"},[i("div",{staticClass:"title_txt"},[e._v("联系人")]),i("v-uni-navigator",{staticClass:"addressStyle",attrs:{url:"../address_list/address_list?typeIndex=0"}},[e._v("地址簿")]),i("v-uni-navigator",{staticClass:"col item_wrap",attrs:{url:"../address_list/address_list?typeIndex=0"}},[i("div",{staticClass:"row item",staticStyle:{"border-top":"transparent"}},[i("span",[e._v("姓名")]),i("span",{staticClass:"name"},[e._v(e._s(e.name))])])]),i("v-uni-navigator",{staticClass:"col item_wrap",attrs:{url:"../address_list/address_list?typeIndex=0"}},[i("div",{staticClass:"row item"},[i("span",[e._v("手机号")]),i("span",{staticClass:"name"},[e._v(e._s(e.phone))])])]),i("v-uni-navigator",{staticClass:"col item_wrap",attrs:{url:"../address_list/address_list?typeIndex=0"}},[i("div",{staticClass:"row item"},[i("span",[e._v("地址")]),i("span",{staticClass:"name"},[e._v(e._s(e.address))])])]),e._e(),i("div",{staticClass:"title_txt"},[e._v("需求明细")]),i("div",{staticClass:"row item_wrap",on:{click:function(t){t=e.$handleEvent(t),e.showTypeAction(t)}}},[i("div",{staticClass:"row pick_item"},[i("span",[e._v("类型")]),i("span",{staticClass:"content"},[e._v(e._s(e.service_order_name))]),i("span",{staticClass:"arraw"})])]),i("div",{staticClass:"col item_wrap"},[i("div",{staticClass:"row item"},[i("span",[e._v("数量")]),i("v-uni-input",{staticClass:"number",attrs:{type:"number",maxlength:"5",placeholder:"请填写数量"},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}})],1)]),i("div",{staticClass:"row item_wrap",on:{click:function(t){t=e.$handleEvent(t),e.lookTime(t)}}},[i("div",{staticClass:"row pick_item"},[i("span",[e._v("服务时间")]),i("span",{staticClass:"content "},[e._v(e._s(e.service_time))]),i("span",{staticClass:"arraw"})])]),i("div",{staticClass:"text_wrap"},[i("div",{staticStyle:{"margin-bottom":"18px"}},[e._v("需求明细")]),i("v-uni-textarea",{staticClass:"requirements",attrs:{placeholder:"请填写需求明细"},model:{value:e.demandDetail,callback:function(t){e.demandDetail=t},expression:"demandDetail"}})],1),i("v-uni-button",{staticClass:" button",on:{click:function(t){t=e.$handleEvent(t),e.create_water_order(t)}}},[e._v("提交需求")])],1),i("mpvue-picker",{ref:"mpvuePicker",attrs:{themeColor:e.themeColor,mode:e.mode,deepLength:e.deepLength,pickerValueDefault:e.pickerValueDefault,pickerValueArray:e.pickerValueArray},on:{onConfirm:function(t){t=e.$handleEvent(t),e.onConfirm(t)},onCancel:function(t){t=e.$handleEvent(t),e.onCancel(t)}}})],1)},r=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return r})},"81e4":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(i("a34a")),r=i("9797"),n=o(i("66f9")),s=i("2f62");o(i("0af8"));function o(e){return e&&e.__esModule?e:{default:e}}function c(e,t,i,a,r,n,s){try{var o=e[n](s),c=o.value}catch(d){return void i(d)}o.done?t(c):Promise.resolve(c).then(a,r)}function d(e){return function(){var t=this,i=arguments;return new Promise(function(a,r){var n=e.apply(t,i);function s(e){c(n,a,r,s,o,"next",e)}function o(e){c(n,a,r,s,o,"throw",e)}s(void 0)})}}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){l(e,t,i[t])})}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var f={components:{mpvuePicker:n.default},data:function(){return{type:0,name:"请选择姓名",phone:"请选择手机号",address:"请选择地址",service_order_type:"",service_time:"请选择",themeColor:"#007AFF",mode:"multiLinkageSelector",deepLength:2,pickerValueDefault:[0,0],pickerValueArray:[],mulLinkageTwoPicker:[],itemList:["一小时内","当天上午","当天下午","隔天上午","隔天下午"],companyID:0,quantity:"",demandDetail:"",money:"",service_order_name:"请选择",waterPrice:0,imgPic:"",selectAddressID:0}},computed:u({},(0,s.mapState)({addressID:function(e){return e.addressID}})),methods:{create_water_order:function(){var e=d(a.default.mark(function e(){var t,i,r;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.selectAddressID){e.next=3;break}return uni.showToast({icon:"none",title:"请选择地址",duration:1e3}),e.abrupt("return");case 3:if("请选择"!=this.service_order_name){e.next=7;break}return uni.showToast({icon:"none",title:"请选择服务类型",duration:1e3}),e.abrupt("return");case 7:if("请选择"!=this.service_time){e.next=11;break}return uni.showToast({icon:"none",title:"请选择服务时间",duration:1e3}),e.abrupt("return");case 11:if(this.quantity){e.next=15;break}return uni.showToast({icon:"none",title:"请填写数量",duration:1e3}),e.abrupt("return");case 15:t=uni.getStorageSync("userInfo"),i=3,r={userID:t.userID,addressID:this.selectAddressID,platform:i,companyID:t.qyCompanyID,isCompany:1==this.type?"1":"0",companyName:t.qyCompanyName,quantity:this.quantity,serviceTime:this.service_time,demandDetail:this.demandDetail,waterTypeID:this.service_order_type,service_order_name:this.service_order_name,name:this.name,phone:this.phone,address:this.address,money:parseFloat(parseFloat(this.waterPrice).toFixed(2)*parseFloat(this.quantity).toFixed(2)).toFixed(2),waterPrice:this.waterPrice,imgPic:this.imgPic},uni.setStorageSync("serviceOrder",r),this.goToFormSure();case 21:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getwaterTypeAndPrice:function(){var e=d(a.default.mark(function e(){var t,i,n=this;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={companyID:0==this.type?0:this.companyID},e.next=3,(0,r.getwaterTypeAndPrice)(t);case 3:i=e.sent,1==i.status&&(i.data.map(function(e){e.value=e.wtId,e.label=e.wtName,e.children=[],e.sizes.map(function(t){var i={label:t.wtsName,value:1==n.type?t.qwsId:t.wtsId,wtsImg:t.wtsImg,wtsPrice:t.wtsPrice};e.children.push(i)})}),this.mulLinkageTwoPicker=i.data);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),goToAddress:function(){uni.navigateTo({url:"/page/address_list/address_list?typeIndex=0"})},goToFormSure:function(){uni.navigateTo({url:"/pages/service_form_sure/service_form_sure?type="+this.type})},lookTime:function(){var e=this;uni.showActionSheet({itemList:e.itemList,success:function(t){console.log(t.tapIndex),e.service_time=e.itemList[t.tapIndex]}})},onConfirm:function(e){console.log(e),this.service_order_name=e.label,this.service_order_type=e.value[1],this.waterPrice=this.mulLinkageTwoPicker[e.index[0]].sizes[e.index[1]].wtsPrice,this.imgPic=this.mulLinkageTwoPicker[e.index[0]].sizes[e.index[1]].wtsImg},showTypeAction:function(){this.pickerValueArray=this.mulLinkageTwoPicker,this.$refs.mpvuePicker.show()},addressManage:function(){var e=d(a.default.mark(function e(){var t,i;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={userID:uni.getStorageSync("userInfo").userID,addressID:this.selectAddressID,flag:4},e.next=3,(0,r.addressManage)(t);case 3:i=e.sent,1==i.status&&(this.name=i.data.name,this.phone=i.data.phone,this.address=i.data.province+i.data.city+i.data.area+i.data.detail,this.selectAddressID=i.data.addressID);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},onLoad:function(e){this.type=e.type,1==this.type?(uni.setNavigationBarTitle({title:"企业饮水服务"}),this.companyID=uni.getStorageSync("userInfo").qyCompanyID):(uni.setNavigationBarTitle({title:"个人饮水服务"}),this.companyID=0),this.$store.commit("changeAddress",0),this.getwaterTypeAndPrice()},onShow:function(){0!=this.addressID&&(this.selectAddressID=this.addressID,this.addressManage())}};t.default=f},ac13:function(e,t,i){var a=i("f797");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=i("4f06").default;r("2205d528",a,!0,{sourceMap:!1,shadowMode:!1})},dcb1:function(e,t,i){"use strict";var a=i("ac13"),r=i.n(a);r.a},e25b:function(e,t,i){"use strict";i.r(t);var a=i("5a5b"),r=i("381b");for(var n in r)"default"!==n&&function(e){i.d(t,e,function(){return r[e]})}(n);i("dcb1");var s=i("2877"),o=Object(s["a"])(r["default"],a["a"],a["b"],!1,null,"ef060540",null);t["default"]=o.exports},f797:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".addressStyle[data-v-ef060540]{border:%?2?% dashed #007aff;text-align:center;margin:%?0?% %?32?%;height:%?88?%;line-height:%?88?%;color:#107eff;font-size:%?32?%;-webkit-box-sizing:border-box;box-sizing:border-box}.title_txt[data-v-ef060540]{color:#666;font-size:%?24?%;padding:%?32?% %?30?%;background-color:#f9f9f9}.item_wrap[data-v-ef060540]{height:%?100?%;background-color:#fff;padding:0 %?32?%}.item[data-v-ef060540]{height:%?100?%;width:100%;border-bottom:%?2?% solid #e3e3e3}.item span[data-v-ef060540]:first-child{color:#333;font-size:%?28?%;width:%?160?%}.item span[data-v-ef060540]{color:#666}.item uni-input[data-v-ef060540]{margin-bottom:0;border:none;background:rgba(0,0,0,0);color:#666;font-size:%?28?%;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}[data-v-ef060540]::-webkit-input-placeholder{color:#ccc;font-size:%?28?%}.pick_item[data-v-ef060540]{height:%?100?%;width:100%;border-bottom:%?2?% solid #e3e3e3;color:#333;font-size:%?28?%}.pick_item .content[data-v-ef060540]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:right;font-size:%?28?%;color:#666;height:%?100?%;line-height:%?100?%}.arraw[data-v-ef060540]{width:%?20?%;height:%?20?%;border-top:%?4?% solid #999;border-right:%?4?% solid #999;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);margin-left:%?4?%}.text_wrap[data-v-ef060540]{padding:%?36?% %?32?%;background-color:#fff;color:#33333;font-size:%?28?%}uni-textarea[data-v-ef060540]{padding:%?18?% %?22?%;height:%?140?%;background-color:#f9f9f9;margin-bottom:0;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;min-height:%?200?%}uni-textarea[data-v-ef060540]::-webkit-input-placeholder{color:#999;font-size:%?24?%}.button[data-v-ef060540]{-webkit-border-radius:%?6?%;border-radius:%?6?%;width:100%;margin:%?50?% 5% %?146?%;-webkit-box-sizing:border-box;box-sizing:border-box;font-size:%?32?%;width:90%;height:%?80?%;padding:0;background-color:#107eff!important;color:#fff}",""])}}]);