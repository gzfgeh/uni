(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/service_form/service_form"],{2608:function(e,t,r){"use strict";var n=r("bea1"),i=r.n(n);i.a},"3bbe":function(e,t,r){"use strict";r.r(t);var n=r("e823"),i=r("ce15");for(var a in i)"default"!==a&&function(e){r.d(t,e,function(){return i[e]})}(a);r("2608");var s=r("2877"),o=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,null,null);t["default"]=o.exports},"45c0":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r("a34a")),i=r("692b"),a=r("2f62");s(r("5822"));function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,n,i,a,s){try{var o=e[a](s),c=o.value}catch(u){return void r(u)}o.done?t(c):Promise.resolve(c).then(n,i)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,c,"next",e)}function c(e){o(a,n,i,s,c,"throw",e)}s(void 0)})}}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){d(e,t,r[t])})}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(){return r.e("components/mpvuePicker").then(r.bind(null,"a450"))},f={components:{mpvuePicker:l},data:function(){return{type:0,name:"请选择姓名",phone:"请选择手机号",address:"请选择地址",service_order_type:"",service_time:"请选择",themeColor:"#007AFF",mode:"multiLinkageSelector",deepLength:2,pickerValueDefault:[0,0],pickerValueArray:[],mulLinkageTwoPicker:[],itemList:["一小时内","当天上午","当天下午","隔天上午","隔天下午"],companyID:0,quantity:"",demandDetail:"",money:"",service_order_name:"请选择",waterPrice:0,imgPic:"",selectAddressID:0}},computed:u({},(0,a.mapState)({addressID:function(e){return e.addressID}})),methods:{create_water_order:function(){var t=c(n.default.mark(function t(){var r,i,a;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.selectAddressID){t.next=3;break}return e.showToast({icon:"none",title:"请选择地址",duration:1e3}),t.abrupt("return");case 3:if("请选择"!=this.service_order_name){t.next=7;break}return e.showToast({icon:"none",title:"请选择服务类型",duration:1e3}),t.abrupt("return");case 7:if("请选择"!=this.service_time){t.next=11;break}return e.showToast({icon:"none",title:"请选择服务时间",duration:1e3}),t.abrupt("return");case 11:if(this.quantity){t.next=15;break}return e.showToast({icon:"none",title:"请填写数量",duration:1e3}),t.abrupt("return");case 15:r=e.getStorageSync("userInfo"),i=3,i=1,a={userID:r.userID,addressID:this.selectAddressID,platform:i,companyID:r.qyCompanyID,isCompany:1==this.type?"1":"0",companyName:r.qyCompanyName,quantity:this.quantity,serviceTime:this.service_time,demandDetail:this.demandDetail,waterTypeID:this.service_order_type,service_order_name:this.service_order_name,name:this.name,phone:this.phone,address:this.address,money:parseFloat(parseFloat(this.waterPrice).toFixed(2)*parseFloat(this.quantity).toFixed(2)).toFixed(2),waterPrice:this.waterPrice,imgPic:this.imgPic},e.setStorageSync("serviceOrder",a),this.goToFormSure();case 22:case"end":return t.stop()}},t,this)}));function r(){return t.apply(this,arguments)}return r}(),getwaterTypeAndPrice:function(){var e=c(n.default.mark(function e(){var t,r,a=this;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={companyID:0==this.type?0:this.companyID},e.next=3,(0,i.getwaterTypeAndPrice)(t);case 3:r=e.sent,1==r.status&&(r.data.map(function(e){e.value=e.wtId,e.label=e.wtName,e.children=[],e.sizes.map(function(t){var r={label:t.wtsName,value:1==a.type?t.qwsId:t.wtsId,wtsImg:t.wtsImg,wtsPrice:t.wtsPrice};e.children.push(r)})}),this.mulLinkageTwoPicker=r.data);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),goToAddress:function(){e.navigateTo({url:"/page/address_list/address_list?typeIndex=0"})},goToFormSure:function(){e.navigateTo({url:"/pages/service_form_sure/service_form_sure?type="+this.type})},lookTime:function(){plus.key.hideSoftKeybord();var t=this;e.showActionSheet({itemList:t.itemList,success:function(e){console.log(e.tapIndex," at pages/service_form/service_form.vue:236"),t.service_time=t.itemList[e.tapIndex]}})},onConfirm:function(e){console.log(e," at pages/service_form/service_form.vue:242"),this.service_order_name=e.label,this.service_order_type=e.value[1],this.waterPrice=this.mulLinkageTwoPicker[e.index[0]].sizes[e.index[1]].wtsPrice,this.imgPic=this.mulLinkageTwoPicker[e.index[0]].sizes[e.index[1]].wtsImg},showTypeAction:function(){plus.key.hideSoftKeybord(),this.pickerValueArray=this.mulLinkageTwoPicker,this.$refs.mpvuePicker.show()},addressManage:function(){var t=c(n.default.mark(function t(){var r,a;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r={userID:e.getStorageSync("userInfo").userID,addressID:this.selectAddressID,flag:4},t.next=3,(0,i.addressManage)(r);case 3:a=t.sent,1==a.status&&(this.name=a.data.name,this.phone=a.data.phone,this.address=a.data.province+a.data.city+a.data.area+a.data.detail,this.selectAddressID=a.data.addressID);case 5:case"end":return t.stop()}},t,this)}));function r(){return t.apply(this,arguments)}return r}()},onLoad:function(t){this.type=t.type,1==this.type?(e.setNavigationBarTitle({title:"企业饮水服务"}),this.companyID=e.getStorageSync("userInfo").qyCompanyID):(e.setNavigationBarTitle({title:"个人饮水服务"}),this.companyID=0),this.$store.commit("changeAddress",0),this.getwaterTypeAndPrice()},onShow:function(){0!=this.addressID&&(this.selectAddressID=this.addressID,this.addressManage())}};t.default=f}).call(this,r("6e42")["default"])},bea1:function(e,t,r){},ce15:function(e,t,r){"use strict";r.r(t);var n=r("45c0"),i=r.n(n);for(var a in n)"default"!==a&&function(e){r.d(t,e,function(){return n[e]})}(a);t["default"]=i.a},e823:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},i=[];r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i})}},[["8926","common/runtime","common/vendor"]]]);