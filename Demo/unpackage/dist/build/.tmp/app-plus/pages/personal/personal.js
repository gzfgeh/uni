(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/personal/personal"],{"13a6":function(e,n,t){"use strict";var a=t("a590"),o=t.n(a);o.a},"7e29":function(e,n,t){"use strict";t.r(n);var a=t("9df6"),o=t("ba78");for(var r in o)"default"!==r&&function(e){t.d(n,e,function(){return o[e]})}(r);t("13a6");var s=t("2877"),u=Object(s["a"])(o["default"],a["a"],a["b"],!1,null,null,null);n["default"]=u.exports},"975a":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(t("a34a")),o=t("692b");function r(e){return e&&e.__esModule?e:{default:e}}function s(e,n,t,a,o,r,s){try{var u=e[r](s),i=u.value}catch(c){return void t(c)}u.done?n(i):Promise.resolve(i).then(a,o)}function u(e){return function(){var n=this,t=arguments;return new Promise(function(a,o){var r=e.apply(n,t);function u(e){s(r,a,o,u,i,"next",e)}function i(e){s(r,a,o,u,i,"throw",e)}u(void 0)})}}var i=function(){return t.e("components/uni-popup").then(t.bind(null,"25a9"))},c={components:{uniPopup:i},data:function(){return{type:"",companyCode:"",loginStatus:0,headImg:"../../static/img/mtyou_icon.png",userName:"",phone:"",is_vip:0}},onLoad:function(){var n=e.getStorageSync("userInfo");this.userName=n.userName,this.phone=n.phone,this.is_vip=parseInt(n.is_vip)},onShow:function(){var n=e.getStorageSync("userInfo").companyCode;n&&(this.companyCode=n);var t=e.getStorageSync("userInfo").userImage;this.headImg=t,this.headImg||(this.headImg="../../static/img/mtyou_icon.png")},methods:{updateUserInfo:function(){var n=u(a.default.mark(function n(t){var r,s;return a.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return r={userID:e.getStorageSync("userInfo").userID,userName:this.userName,userImage:t},n.next=3,(0,o.updateUserInfo)(r);case 3:s=n.sent,s.status;case 5:case"end":return n.stop()}},n,this)}));function t(e){return n.apply(this,arguments)}return t}(),deleteQyCompany:function(){var n=u(a.default.mark(function n(){var t,r;return a.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return t=e.getStorageSync("userInfo"),n.next=3,(0,o.deleteQyCompany)({userID:t.userID,companyCode:this.companyCode});case 3:r=n.sent,e.showToast({icon:"none",title:r.message,duration:1e3}),1==r.status&&(this.companyCode="",e.setStorageSync("userInfo",r.data.userInfo));case 6:case"end":return n.stop()}},n,this)}));function t(){return n.apply(this,arguments)}return t}(),bindCompanyCode:function(){var n=u(a.default.mark(function n(){var t,r;return a.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(this.companyCode){n.next=3;break}return e.showToast({icon:"none",title:"请输入企业号",duration:1e3}),n.abrupt("return");case 3:return console.log(this.companyCode," at pages/personal/personal.vue:162"),t=e.getStorageSync("userInfo"),n.next=7,(0,o.addQycompany)({userID:t.userID,companyCode:this.companyCode});case 7:r=n.sent,console.log(r," at pages/personal/personal.vue:167"),1==r.status?(this.type="",e.setStorageSync("userInfo",r.data.userInfo),e.showToast({icon:"none",title:r.message,duration:1e3})):e.showToast({icon:"none",title:r.message,duration:1e3});case 10:case"end":return n.stop()}},n,this)}));function t(){return n.apply(this,arguments)}return t}(),companyChange:function(e){},bindCompany:function(n){if(""==this.companyCode)this.type=n;else{var t=this;e.showModal({title:"提示",content:"是否解除企业绑定？",confirmText:"确定",cancelText:"取消",success:function(e){e.confirm&&(console.log("用户点击确定"," at pages/personal/personal.vue:211"),t.deleteQyCompany())}})}},loginOut:function(){var n=u(a.default.mark(function n(){var t,r;return a.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return t=e.getStorageSync("userInfo").userID,console.log(t," at pages/personal/personal.vue:223"),n.next=4,(0,o.logout)(t);case 4:r=n.sent,1==r.status&&(e.removeStorageSync("userInfo"),e.navigateBack({delta:1}));case 6:case"end":return n.stop()}},n,this)}));function t(){return n.apply(this,arguments)}return t}(),updateInfo:function(){var n=u(a.default.mark(function n(){var t,r;return a.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(this.userName){n.next=3;break}return e.showToast({icon:"none",title:"请输入正确的用户名",duration:1e3}),n.abrupt("return");case 3:return t={userID:e.getStorageSync("userInfo").userID,userName:this.userName,phone:this.phone},n.next=6,(0,o.updateUserInfo)(t);case 6:r=n.sent,1==r.status&&(e.setStorageSync("userInfo",r.data.userInfo),e.showToast({icon:"none",title:"更新成功",duration:1e3}),setTimeout(function(){e.navigateBack({delta:1})},1e3));case 8:case"end":return n.stop()}},n,this)}));function t(){return n.apply(this,arguments)}return t}(),changeHeadImg:function(){e.chooseImage({sourceType:["camera","album"],sizeType:["compressed"],count:1,success:function(n){e.navigateTo({url:"/pages/crop/crop?image="+n.tempFilePaths[0]})}})}}};n.default=c}).call(this,t("6e42")["default"])},"9df6":function(e,n,t){"use strict";var a=function(){var e=this,n=e.$createElement;e._self._c},o=[];t.d(n,"a",function(){return a}),t.d(n,"b",function(){return o})},a590:function(e,n,t){},ba78:function(e,n,t){"use strict";t.r(n);var a=t("975a"),o=t.n(a);for(var r in a)"default"!==r&&function(e){t.d(n,e,function(){return a[e]})}(r);n["default"]=o.a}},[["326f","common/runtime","common/vendor"]]]);