(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mall_detail/mall_detail"],{"16c6":function(t,e,n){"use strict";n.r(e);var i=n("c46c"),s=n("58b5");for(var c in s)"default"!==c&&function(t){n.d(e,t,function(){return s[t]})}(c);n("b893");var o=n("2877"),a=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,"386a601a",null);e["default"]=a.exports},"58b5":function(t,e,n){"use strict";n.r(e);var i=n("b08f"),s=n.n(i);for(var c in i)"default"!==c&&function(t){n.d(e,t,function(){return i[t]})}(c);e["default"]=s.a},b08f:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(n("a34a")),s=n("692b");function c(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,i,s,c,o){try{var a=t[c](o),r=a.value}catch(u){return void n(u)}a.done?e(r):Promise.resolve(r).then(i,s)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(i,s){var c=t.apply(e,n);function a(t){o(c,i,s,a,r,"next",t)}function r(t){o(c,i,s,a,r,"throw",t)}a(void 0)})}}var r={data:function(){return{isAPP:!1,buildingName:"请选择楼宇",itemList:[1,2,1,3,4,5],t_url:"",curIndex:0,contentCurIndex:0,statusBarHeight:0,scrollWidth:0,swipeHeight:0,shopList:[],thirdIndex:0,firstIndex:0,secondIndex:0,fourIndex:0,showModal:!1,ct_count:1,id:0,item:{},detail:"",collect_icon:"../../static/img/like_icon.png",collect_text:"收藏",spec:""}},onLoad:function(e){var n=this;this.id=e.goodsID,this.goods_detail(),t.getSystemInfo({success:function(t){n.scrollWidth=t.windowWidth}})},methods:{inputChange:function(t){var e=this;setTimeout(function(){parseInt(e.ct_count)>1||(e.ct_count=1)},200)},addAction:function(){this.ct_count++},reduceAction:function(){this.ct_count--,this.ct_count<=0&&(this.ct_count=1)},collect:function(){var e=a(i.default.mark(function e(){var n,c;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n={userID:t.getStorageSync("userInfo").userID,goodsID:this.item.id},e.next=3,(0,s.collect)(n);case 3:c=e.sent,1==c.status?(t.showToast({icon:"none",duration:1e3,title:c.message}),"../../static/img/like_icon.png"==this.collect_icon?(this.collect_icon="../../static/img/like_icon_active.png",this.collect_text="取消"):(this.collect_icon="../../static/img/like_icon.png",this.collect_text="收藏")):t.showToast({icon:"none",duration:1e3,title:c.message});case 5:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),callPhone:function(){t.makePhoneCall({phoneNumber:this.item.store[0].store_phone,success:function(){console.log("成功拨打电话"," at pages/mall_detail/mall_detail.vue:239")}})},jiaCard:function(t){this.showModal?this.shopcart(t):(this.ct_count=1,this.showModal=!0)},shopcart:function(){var e=a(i.default.mark(function e(n){var c,o,a;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return c="",this.item.spec1&&(c+=this.item.spec_child_name1[this.firstIndex].name+";"),this.item.spec2&&(c+=this.item.spec_child_name2[this.secondIndex].name+";"),this.item.spec3&&(c+=this.item.spec_child_name3[this.thirdIndex].name+";"),this.item.spec4&&(c+=this.item.spec_child_name4[this.fourIndex].name+";"),o={user_id:t.getStorageSync("userInfo").userID,goods_id:this.item.id,store_id:this.item.store_id,price:this.item.price,count:this.ct_count,spec:c.substring(0,c.length-1)},e.next=8,(0,s.shopcart)(o);case 8:a=e.sent,1==a.status&&(0==n?(this.showModal=!1,t.showToast({duration:1e3,icon:"none",title:"加入购物车成功"})):this.shopcart_list(o.spec));case 10:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),shopcart_list:function(){var e=a(i.default.mark(function e(n){var c,o,a,r;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,s.shopcart_list)({user_id:t.getStorageSync("userInfo").userID});case 2:c=e.sent,1==c.status&&(o=c.list[0].goodsInfo[0].id,a=[],a.push(o),r={user_id:t.getStorageSync("userInfo").userID,shopcartID:a,coupon_shopcart_id:a,addressID:""},t.setStorageSync("params",r),t.navigateTo({url:"../mall_post/mall_post"}));case 4:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),closeModal:function(){this.showModal=!1},changeFirst:function(t){this.firstIndex=t},changeSecond:function(t){this.secondIndex=t},changeThird:function(t){this.thirdIndex=t},changeFourth:function(t){this.fourIndex=t},imageLoad:function(t){var e=t.mp.detail.width,n=t.mp.detail.height;this.swipeHeight=parseFloat(n*this.scrollWidth/e)+"px"},slideChange:function(t){this.curIndex=t.mp.detail.current},goods_detail:function(){var e=a(i.default.mark(function e(){var n,c,o;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,s.goods_detail)({goodsID:this.id,userID:t.getStorageSync("userInfo").userID});case 2:n=e.sent,1==n.status&&(this.item=n.data,this.collect_icon=0==this.item.is_collect?"../../static/img/like_icon.png":"../../static/img/like_icon_active.png",this.collect_text=0==this.item.is_collect?"收藏":"取消",this.detail=n.data.detail,c=this.detail,o=new RegExp("<img","gi"),c=c.replace(o,'<img style="width: 100%!important;"'),this.detail=c);case 4:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}()},onNavigationBarButtonTap:function(){t.navigateTo({url:"../mall_card/mall_card"})}};e.default=r}).call(this,n("6e42")["default"])},b893:function(t,e,n){"use strict";var i=n("d49c"),s=n.n(i);s.a},c46c:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,i=(t._self._c,n("4a00")),s=n("4d58"),c=n("35d8"),o=n("8378"),a=n("e6a0");t.$mp.data=Object.assign({},{$root:{m0:i,m1:s,m2:c,m3:o,m4:a}})},s=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s})},d49c:function(t,e,n){}},[["1124","common/runtime","common/vendor"]]]);