(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/wai_mai_main/wai_mai_main"],{"1d3b":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("a34a")),i=n("692b");function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,a,i,r,o){try{var u=e[r](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(a,i)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var r=e.apply(t,n);function u(e){o(r,a,i,u,s,"next",e)}function s(e){o(r,a,i,u,s,"throw",e)}u(void 0)})}}var s=function(){return n.e("components/popup-pay").then(n.bind(null,"787f"))},c={components:{uniPopup:s},data:function(){return{content:"",imageList:[],popupParam:"",orderID:"",allMoney:"",price:"0.01"}},methods:{close:function(e){this.imageList.splice(e,1)},payPopup:function(e){this.popupParam=e},chooseImg:function(){var t=this;e.chooseImage({sourceType:["camera","album"],sizeType:["compressed"],count:9-this.imageList.length,success:function(e){e.tempFilePaths.map(function(e){t.uploadFile(e)})}})},previewImage:function(){e.previewImage({urls:this.imageList})},uploadFile:function(t){var n=this;e.showLoading({title:"加载中..."}),e.uploadFile({url:i.BASE_IMAGE_URL+"user/user/uploadImage",filePath:t,name:"image",header:{userToken:e.getStorageSync("userInfo").token},formData:{},success:function(t){if(e.hideLoading(),console.log(t," at pages/wai_mai_main/wai_mai_main.vue:94"),t.data){var a=JSON.parse(t.data);if(1==a.status){n.imageList=n.imageList.concat(a.data);var i=n.imageList.length;n.allMoney=parseFloat(parseFloat(n.price)*i)}else 999==a.status&&e.navigateTo({url:"/pages/login/login"})}else e.navigateTo({url:"/pages/login/login"})}})},getWaterPrice:function(){var e=u(a.default.mark(function e(){var t;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.getWaterPrice)();case 2:t=e.sent,1==t.status&&(this.price=t.data.price);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),create_takeout_order:function(){var t=u(a.default.mark(function t(){var n,r;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.imageList.length){t.next=3;break}return e.showToast({icon:"none",title:"请上传图片",duration:1e3}),t.abrupt("return");case 3:return n={userID:e.getStorageSync("userInfo").userID,takeoutOrderUrl:this.imageList},t.next=7,(0,i.create_takeout_order)(n);case 7:r=t.sent,1==r.status?(e.showToast({icon:"none",title:"提交成功",duration:1e3}),this.payPopup("bottom"),this.orderID=r.data.orderID):e.showToast({icon:"none",title:r.message,duration:1e3});case 9:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}()},onLoad:function(){this.getWaterPrice()}};t.default=c}).call(this,n("6e42")["default"])},2950:function(e,t,n){"use strict";var a=n("c7c6"),i=n.n(a);i.a},"48e3":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},c7c6:function(e,t,n){},f7f9:function(e,t,n){"use strict";n.r(t);var a=n("48e3"),i=n("fa9b");for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);n("2950");var o=n("2877"),u=Object(o["a"])(i["default"],a["a"],a["b"],!1,null,null,null);t["default"]=u.exports},fa9b:function(e,t,n){"use strict";n.r(t);var a=n("1d3b"),i=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t["default"]=i.a}},[["d71e","common/runtime","common/vendor"]]]);