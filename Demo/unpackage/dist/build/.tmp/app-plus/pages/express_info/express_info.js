(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/express_info/express_info"],{"48a8":function(e,t,s){"use strict";var i=s("af23"),r=s.n(i);r.a},"5dd4":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,i=(e._self._c,s("77e2")),r=s("b4e7"),a=s("b4e7"),n=s("8378"),o=s("ea71"),d=s("67ae"),c=parseInt(e.allMoney),h=s("7889"),p=s("7889"),u=s("7889"),l=s("8378"),y=s("ea71"),g=s("7889");e.$mp.data=Object.assign({},{$root:{m0:i,m1:r,m2:a,m3:n,m4:o,m5:d,m6:c,m7:h,m8:p,m9:u,m10:l,m11:y,m12:g}})},r=[];s.d(t,"a",function(){return i}),s.d(t,"b",function(){return r})},"844c":function(e,t,s){"use strict";s.r(t);var i=s("b71f"),r=s.n(i);for(var a in i)"default"!==a&&function(e){s.d(t,e,function(){return i[e]})}(a);t["default"]=r.a},af23:function(e,t,s){},b71f:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(s("a34a")),r=s("692b"),a=s("2f62");function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,s,i,r,a,n){try{var o=e[a](n),d=o.value}catch(c){return void s(c)}o.done?t(d):Promise.resolve(d).then(i,r)}function d(e){return function(){var t=this,s=arguments;return new Promise(function(i,r){var a=e.apply(t,s);function n(e){o(a,i,r,n,d,"next",e)}function d(e){o(a,i,r,n,d,"throw",e)}n(void 0)})}}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},i=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),i.forEach(function(t){h(e,t,s[t])})}return e}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var p=function(){return s.e("components/popup-pay").then(s.bind(null,"787f"))},u={components:{uniPopup:p},data:function(){return{popupParam:"",companyList:[],qcServiceType:1,qcOrderType:1,company_index:0,goodsTypeFlag:!1,payStyleFlag:!1,packageFlag:!1,faPiaoFlag:!1,beiZhuFlag:!1,createOrderType:1,addressType:-1,start_name:"",start_phone:"",start_province:"上海",start_city:"",start_area:"",start_detail:"",end_name:"",end_phone:"",end_province:"",end_city:"",end_area:"",end_detail:"",end_name1:"",end_phone1:"",end_province1:"",end_city1:"",end_area1:"",QrCodeOrderSN:"",end_detail1:"",isQrCode:0,isCalculateExpressPriceTongCheng:0,sendAddressID:0,receiveAddressID:0,receiveAddressID1:0,tagList:["文件","日用品","食品","数码产品","衣物","其他"],tag_index:0,weight:1,payList:["寄付","到付"],pay_index:0,piaoList:["形式发票","商业发票"],piao_index:0,comment:"",baoJiaFlag:!1,insuredValue:"",expressProductType:1,orderType:0,allMoney:"",insuredPrice:0,expressCompanyID:0,platform:2,classA:"active",classB:"",classC:"",isInternational:0,expressPackageDetail:"",isPrintEs:!1,orderID:"",orderSN:"",expressCompanyName:"",isHongxing:0,hongxingName:"",departmentName:"请选择部门",itemList:[]}},computed:c({},(0,a.mapState)({addressID:function(e){return e.addressID}})),methods:{getDepartment:function(){var e=d(i.default.mark(function e(){var t,s=this;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,r.department)();case 2:t=e.sent,1==t.status&&t.data.map(function(e){s.itemList.push(e.name)});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),selectDepartment:function(){var t=this;e.showActionSheet({itemList:t.itemList,success:function(e){t.departmentName=t.itemList[e.tapIndex]},fail:function(e){}})},showBaoJia:function(){"EMS"!=this.expressCompanyName&&e.showToast({title:"只有EMS可以保价",icon:"none",duration:1e3})},liancheng:function(e){1==e?(this.classA="active",this.classB="",this.classC=""):2==e?(this.classA="",this.classB="active",this.classC=""):3==e&&(this.classA="",this.classB="",this.classC="active"),this.qcOrderType=e},calAllPrice:function(){3==this.createOrderType?this.calculateExpressPriceTongCheng():this.calculateExpressPrice()},baoJiaChange:function(e){console.log(e," at pages/express_info/express_info.vue:545"),this.insuredValue=e.detail.value,this.calAllPrice()},addWeight:function(){this.weight=parseFloat(this.weight),this.weight+=.5,this.calAllPrice()},reduceWeight:function(){this.weight=parseFloat(this.weight),this.weight<=1?this.weight=1:(this.weight-=.5,this.calAllPrice())},changeTag:function(e){this.tag_index=e,this.goodsTypeFlag=!1},changePay:function(e){this.pay_index=e,this.payStyleFlag=!1,this.calculateExpressPrice()},changePiao:function(e){this.piao_index=e,this.faPiaoFlag=!1},changeCompany:function(e){this.company_index=e,this.allMoney=parseFloat(this.companyList[e].price_total).toFixed(2),this.insuredPrice=parseFloat(this.companyList[e].insuredPrice).toFixed(2),this.expressCompanyID=this.companyList[e].expressCompanyID,this.expressCompanyName=this.companyList[e].expressCompanyName},payPopup:function(e){this.popupParam=e},showGoodsType:function(){this.goodsTypeFlag=!0},showPayStyle:function(){this.payStyleFlag=!0},showPackageFlag:function(){this.packageFlag=!0},showFaPiaoFlag:function(){this.faPiaoFlag=!0},showBeiZhuFlag:function(){this.beiZhuFlag=!0},hideModal:function(){this.goodsTypeFlag=!1,this.payStyleFlag=!1,this.packageFlag=!1,this.faPiaoFlag=!1,this.beiZhuFlag=!1},BaoJiaChange:function(e){console.log(e," at pages/express_info/express_info.vue:611"),this.baoJiaFlag=e.detail.value,this.baoJiaFlag?(this.insuredValue=0,this.insuredPrice=0):(this.insuredValue=0,this.insuredPrice=0,this.calAllPrice()())},JiaJiChange:function(e){e.detail.value?this.qcServiceType=2:this.qcServiceType=1,console.log(this.qcServiceType," at pages/express_info/express_info.vue:634")},PrintChange:function(e){this.isPrintEs=e.detail.value},selectAddress:function(t){1==this.createOrderType||3==this.createOrderType?0==t?(this.addressType=0,e.navigateTo({url:"/pages/address_list/address_list?typeIndex=0"})):1==t?(this.addressType=1,e.navigateTo({url:"/pages/address_list/address_list?typeIndex=0&shou=1"})):2==t&&(this.addressType=2,e.navigateTo({url:"/pages/address_list/address_list?typeIndex=0&shou=1"})):2==this.createOrderType&&(0==t?(this.addressType=0,e.navigateTo({url:"/pages/address_list/address_list?typeIndex=0"})):1==t&&(this.addressType=1,e.navigateTo({url:"/pages/address_list/address_list?typeIndex=1"})))},addressManage:function(){var t=d(i.default.mark(function t(){var s,a;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s={userID:e.getStorageSync("userInfo").userID,addressID:this.addressID,flag:4},t.next=3,(0,r.addressManage)(s);case 3:a=t.sent,1==a.status&&(0==this.addressType?(this.start_name=a.data.name,this.start_phone=a.data.phone,this.start_province=a.data.province,this.start_city=a.data.city,this.start_area=a.data.area,this.start_detail=a.data.detail):1==this.addressType?(this.end_name=a.data.name,this.end_phone=a.data.phone,this.end_province=a.data.province,this.end_city=a.data.city,this.end_area=a.data.area,this.end_detail=a.data.detail):2==this.addressType&&(this.end_name1=a.data.name,this.end_phone1=a.data.phone,this.end_province1=a.data.province,this.end_city1=a.data.city,this.end_area1=a.data.area,this.end_detail1=a.data.detail),3==this.createOrderType?this.calculateExpressPriceTongCheng():this.calculateExpressPrice());case 5:case"end":return t.stop()}},t,this)}));function s(){return t.apply(this,arguments)}return s}(),showModal:function(){e.showModal({title:"温馨提示",showCancel:!1,content:"稍后工作人员会和你联系",success:function(t){t.confirm&&(console.log("用户点击确定"," at pages/express_info/express_info.vue:732"),e.redirectTo({url:"/pages/express_list/express_list"}))}})},createOrder:function(){var t=d(i.default.mark(function t(){var s,a,n,o,d,c,p;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.sendAddressID){t.next=3;break}return e.showToast({icon:"none",title:"请选择寄件地址",duration:1e3}),t.abrupt("return");case 3:if(this.receiveAddressID){t.next=7;break}return e.showToast({icon:"none",title:"请选择收件地址",duration:1e3}),t.abrupt("return");case 7:if(3==this.createOrderType||this.expressCompanyID){t.next=11;break}return e.showToast({icon:"none",title:"请选择快递公司",duration:1e3}),t.abrupt("return");case 11:if(1!=this.isHongxing){t.next=19;break}if(this.hongxingName){t.next=16;break}return e.showToast({icon:"none",title:"请输入姓名",duration:1e3}),t.abrupt("return");case 16:if("请选择部门"!=this.departmentName){t.next=19;break}return e.showToast({icon:"none",title:"请选择部门",duration:1e3}),t.abrupt("return");case 19:if(console.log("999999"," at pages/express_info/express_info.vue:789"),s=e.getStorageSync("userInfo"),console.log("888888"+this.createOrderType," at pages/express_info/express_info.vue:792"),1!=this.createOrderType&&2!=this.createOrderType){t.next=60;break}return a={userID:s.userID,sendAddressID:this.sendAddressID,receiveAddressID:this.receiveAddressID,expressCompanyID:this.expressCompanyID,weight:this.weight,orderType:this.orderType,price:this.allMoney,comment:this.comment,isDaoFu:this.pay_index,expressProductType:this.expressProductType,isInternational:this.isInternational,invoiceType:0==this.piao_index?2:1,createOrderType:this.createOrderType,insuredValue:this.insuredValue,platform:this.platform,thing:this.tagList[this.tag_index],qyCompanyID:s.qyCompanyID,expressPackageDetail:this.expressPackageDetail,isQrCode:this.isQrCode,QrCodeOrderSN:this.QrCodeOrderSN,isPrintEs:this.isPrintEs?1:0},1==this.isHongxing&&(a.truename=this.hongxingName,a.depName=this.departmentName),t.next=27,(0,r.createOrder)(a);case 27:if(n=t.sent,1!=n.status){t.next=57;break}if(this.orderID=n.data.orderID,this.orderSN=n.data.orderSN,1!=this.createOrderType){t.next=53;break}if(console.log("企业编码："+s.qyCompanyID," at pages/express_info/express_info.vue:832"),1!=this.orderType){t.next=49;break}if(1!=this.pay_index){t.next=39;break}e.showToast({icon:"none",title:"下单成功",duration:1e3}),e.redirectTo({url:"/pages/express_list/express_list"}),t.next=47;break;case 39:if(console.log(this.allMoney," at pages/express_info/express_info.vue:848"),0!=parseInt(this.allMoney)||"上海"!=this.start_province){t.next=45;break}return e.showToast({icon:"none",title:"输入地址错误",duration:1e3}),t.abrupt("return");case 45:e.showToast({icon:"none",title:"下单成功",duration:1e3}),"上海"==this.start_province?this.payPopup("bottom"):e.redirectTo({url:"/pages/express_list/express_list"});case 47:t.next=51;break;case 49:e.showToast({icon:"none",title:"下单成功",duration:1e3}),e.redirectTo({url:"/pages/express_list/express_list"});case 51:t.next=55;break;case 53:e.showToast({icon:"none",title:"下单成功",duration:1e3}),1==this.orderType?this.showModal():e.redirectTo({url:"/pages/express_list/express_list"});case 55:t.next=58;break;case 57:e.showToast({icon:"none",title:n.message,duration:1e3});case 58:t.next=68;break;case 60:if(3!=this.createOrderType){t.next=68;break}return d=3==this.qcOrderType?this.receiveAddressID+","+this.receiveAddressID1:this.receiveAddressID,o={userID:s.userID,qcOrderType:this.qcOrderType,weight:this.weight,sendAddressID:this.sendAddressID,receiveAddressID:d,thing:this.tagList[this.tag_index],orderType:this.orderType,expressCompanyID:this.expressCompanyID},h(o,"orderType",this.orderType),h(o,"qyCompanyID",s.qyCompanyID),h(o,"isDaoFu",this.pay_index),h(o,"price",this.allMoney),h(o,"qcServiceType",this.qcServiceType),h(o,"insuredValue",this.insuredValue),h(o,"isQrCode",this.isQrCode),h(o,"QrCodeOrderSN",this.QrCodeOrderSN),h(o,"comment",this.comment),c=o,1==this.isHongxing&&(c.truename=this.hongxingName,c.depName=this.departmentName),t.next=66,(0,r.createOrderTongCheng)(c);case 66:p=t.sent,1==p.status?(this.orderID=p.data.orderID,e.showToast({icon:"none",title:"下单成功",duration:1e3}),1==this.orderType?this.showModal():e.redirectTo({url:"/pages/express_list/express_list"})):e.showToast({icon:"none",title:p.message,duration:1e3});case 68:case"end":return t.stop()}},t,this)}));function s(){return t.apply(this,arguments)}return s}(),calculateExpressPriceTongCheng:function(){var t=d(i.default.mark(function t(){var s,a,n;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.sendAddressID){t.next=2;break}return t.abrupt("return");case 2:if(this.receiveAddressID){t.next=5;break}return t.abrupt("return");case 5:if(!this.baoJiaFlag){t.next=9;break}if(this.insuredValue){t.next=9;break}return t.abrupt("return");case 9:return e.getStorageSync("userInfo"),s=3==this.qcOrderType?this.receiveAddressID+","+this.receiveAddressID1:this.receiveAddressID,a={fromAddressID:this.sendAddressID,toAddressID:s,qcOrderType:this.qcOrderType,weight:this.weight,qcServiceType:this.qcServiceType,insuredValue:this.insuredValue},e.setStorageSync("isShow",!1),t.next=16,(0,r.calculateExpressPriceTongCheng)(a);case 16:n=t.sent,console.log(n," at pages/express_info/express_info.vue:1029"),1==n.status?(this.allMoney=0,this.isCalculateExpressPriceTongCheng=1,console.log(this.allMoney," at pages/express_info/express_info.vue:1037")):e.showToast({icon:"none",title:n.message,duration:1e3});case 19:case"end":return t.stop()}},t,this)}));function s(){return t.apply(this,arguments)}return s}(),calculateExpressPrice:function(){var t=d(i.default.mark(function t(){var s,a,n,o=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.sendAddressID){t.next=2;break}return t.abrupt("return");case 2:if(this.receiveAddressID){t.next=5;break}return t.abrupt("return");case 5:if(!this.baoJiaFlag){t.next=9;break}if(this.insuredValue){t.next=9;break}return t.abrupt("return");case 9:return s=e.getStorageSync("userInfo"),e.setStorageSync("isShow",!1),a={fromAddressID:this.sendAddressID,toAddressID:this.receiveAddressID,fromWhere:this.start_province,toWhere:this.end_province,yzID:s.yzID,userID:s.userID,weight:this.weight,expressProductType:this.expressProductType,insuredValue:this.insuredValue,orderType:this.orderType},console.log(a," at pages/express_info/express_info.vue:1081"),t.next=16,(0,r.calculateExpressPrice)(a);case 16:n=t.sent,1==n.status?(this.companyList=n.data.defaultExpressInfo,this.company_index=0,"EMS"==this.expressCompanyName&&this.companyList.map(function(e,t){"EMS"==e.expressCompanyName&&(o.company_index=t)}),this.expressCompanyID=this.companyList[this.company_index].expressCompanyID,this.expressCompanyName=this.companyList[this.company_index].expressCompanyName,this.pay_index,this.allMoney=parseFloat(this.companyList[this.company_index].price_total).toFixed(2),this.insuredPrice=parseFloat(this.companyList[this.company_index].insuredPrice).toFixed(2)):e.showToast({icon:"none",title:n.message,duration:1e3});case 18:case"end":return t.stop()}},t,this)}));function s(){return t.apply(this,arguments)}return s}()},onLoad:function(t){e.showLoading({title:"加载中..."}),setTimeout(function(){e.hideLoading()},500),this.isHongxing=t.hongxing,1==this.isHongxing&&this.getDepartment(),this.createOrderType=t.createOrderType,this.orderType=t.orderType,t.QrCodeOrderSN&&(this.isQrCode=1,this.QrCodeOrderSN=t.QrCodeOrderSN),1==this.orderType&&1==this.createOrderType?e.setNavigationBarTitle({title:"个人国内快递"}):1==this.orderType&&2==this.createOrderType?(e.setNavigationBarTitle({title:"个人国际快递"}),this.isInternational=1):1==this.orderType&&3==this.createOrderType?e.setNavigationBarTitle({title:"个人同城快递"}):2==this.orderType&&1==this.createOrderType?e.setNavigationBarTitle({title:"企业国内快递"}):2==this.orderType&&2==this.createOrderType?(e.setNavigationBarTitle({title:"企业国际快递"}),this.isInternational=1):2==this.orderType&&3==this.createOrderType&&e.setNavigationBarTitle({title:"企业同城快递"}),this.$store.dispatch("changeAddressFunc",0);var s=e.getSystemInfoSync().platform;console.log(s," at pages/express_info/express_info.vue:1180"),this.platform="android"==s?2:"ios"==s?3:1,2==this.orderType&&(this.platform=4)},onShow:function(){console.log(this.selectAddress," at pages/express_info/express_info.vue:1196"),0==this.addressType?0!=this.addressID&&(this.sendAddressID=this.addressID,this.addressManage()):1==this.addressType?0!=this.addressID&&(this.receiveAddressID=this.addressID,this.addressManage()):2==this.addressType&&0!=this.addressID&&(this.receiveAddressID1=this.addressID,this.addressManage())}};t.default=u}).call(this,s("6e42")["default"])},f235:function(e,t,s){"use strict";s.r(t);var i=s("5dd4"),r=s("844c");for(var a in r)"default"!==a&&function(e){s.d(t,e,function(){return r[e]})}(a);s("48a8");var n=s("2877"),o=Object(n["a"])(r["default"],i["a"],i["b"],!1,null,null,null);t["default"]=o.exports}},[["dd29","common/runtime","common/vendor"]]]);