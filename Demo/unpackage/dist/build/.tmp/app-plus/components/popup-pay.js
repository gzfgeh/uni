(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/popup-pay"],{"0106":function(e,t,a){"use strict";var r=a("bbd3"),o=a.n(r);o.a},"16f6":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"a",function(){return r}),a.d(t,"b",function(){return o})},"787f":function(e,t,a){"use strict";a.r(t);var r=a("16f6"),o=a("b828");for(var n in o)"default"!==n&&function(e){a.d(t,e,function(){return o[e]})}(n);a("0106");var i=a("2877"),s=Object(i["a"])(o["default"],r["a"],r["b"],!1,null,null,null);t["default"]=s.exports},8328:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("a34a")),o=a("692b");function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a,r,o,n,i){try{var s=e[n](i),p=s.value}catch(u){return void a(u)}s.done?t(p):Promise.resolve(p).then(r,o)}function s(e){return function(){var t=this,a=arguments;return new Promise(function(r,o){var n=e.apply(t,a);function s(e){i(n,r,o,s,p,"next",e)}function p(e){i(n,r,o,s,p,"throw",e)}s(void 0)})}}var p={name:"UniPopup",props:{show:{type:Boolean,default:!1},position:{type:String,default:"middle"},mode:{type:String,default:"insert"},money:{type:String,default:""},orderID:{type:String,default:""},payWay:{type:String,default:""},orderSN:{type:String,default:""},h5Top:{type:Boolean,default:!1},buttonMode:{type:String,default:"bottom"}},data:function(){return{current:0,payType:"wxpay",offsetTop:0,items:[],trade_type:"JSAPI"}},watch:{h5Top:function(e){this.offsetTop=e?44:0}},created:function(){var t=this;console.log("支付"," at components/popup-pay.vue:129"),this.items=[{value:"wxpay",img:"/static/img/payWay_03.jpg",name:"微信"}],this.trade_type="APP",this.items=[{value:"wxpay",img:"/static/img/payWay_03.jpg",name:"微信"},{value:"alipay",img:"/static/img/payWay_06.jpg",name:"支付宝"}],e.getProvider({service:"payment",success:function(e){console.log("payment success:"+JSON.stringify(e)," at components/popup-pay.vue:165");var a=[];e.provider.map(function(e){switch(e){case"alipay":a.push({name:"支付宝",id:e,loading:!1});break;case"wxpay":a.push({name:"微信",id:e,loading:!1});break;default:break}}),t.providerList=a},fail:function(e){console.log("获取支付通道失败：",e," at components/popup-pay.vue:190")}});var a=0;this.offsetTop=a},methods:{pay:function(){var t=s(r.default.mark(function t(){var a,n,i,s;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.getStorageSync("userInfo"),console.log(this.payType," at components/popup-pay.vue:210"),"wxpay"!=this.payType){t.next=52;break}if(n={},i={},"0"!=this.payWay&&"-1"!=this.payWay){t.next=12;break}return n={out_trade_no:(new Date).getTime(),body:"快递下单",total_fee:this.money,trade_type:this.trade_type,product_id:"express",price:this.money,paymentMoney:this.money,orderID:this.orderID,userID:a.userID,isBuChaJia:0,openid:e.getStorageSync("openid")},t.next=9,(0,o.expressUnifiedOrder)(n);case 9:i=t.sent,t.next=48;break;case 12:if("1"!=this.payWay){t.next=19;break}return n={out_trade_no:(new Date).getTime(),body:"外卖下单",total_fee:this.money,trade_type:this.trade_type,price:this.money,orderID:this.orderID,userID:a.userID,openid:e.getStorageSync("openid")},t.next=16,(0,o.takeout_order_wxpay)(n);case 16:i=t.sent,t.next=48;break;case 19:if("2"!=this.payWay){t.next=26;break}return n={out_trade_no:(new Date).getTime(),body:"饮水服务下单",total_fee:this.money,trade_type:this.trade_type,price:this.money,orderID:this.orderID,userID:a.userID,openid:e.getStorageSync("openid")},t.next=23,(0,o.water_order_wxpay)(n);case 23:i=t.sent,t.next=48;break;case 26:if("3"!=this.payWay){t.next=34;break}return n={out_trade_no:(new Date).getTime(),body:"商城服务下单",total_fee:this.money,trade_type:this.trade_type,price:this.money,orderID:this.orderID,userID:a.userID,openid:e.getStorageSync("openid")},console.log(n," at components/popup-pay.vue:267"),t.next=31,(0,o.mall_order_wxpay)(n);case 31:i=t.sent,t.next=48;break;case 34:if("4"!=this.payWay){t.next=42;break}return n={out_trade_no:(new Date).getTime(),body:"商城小商品下单",total_fee:this.money,trade_type:this.trade_type,price:this.money,orderID:this.orderID,userID:a.userID,openid:e.getStorageSync("openid")},console.log(n," at components/popup-pay.vue:280"),t.next=39,(0,o.mall_order_wxpay)(n);case 39:i=t.sent,t.next=48;break;case 42:if("5"!=this.payWay){t.next=48;break}return n={out_trade_no:(new Date).getTime(),body:"购买楼服宝VIP下单",total_fee:this.money,trade_type:this.trade_type,price:this.money,orderID:this.orderID,userID:a.userID,openid:e.getStorageSync("openid")},console.log(n," at components/popup-pay.vue:293"),t.next=47,(0,o.member_order_wxpay)(n);case 47:i=t.sent;case 48:console.log(i," at components/popup-pay.vue:297"),1==i.status?this.payNow(i.data,this.payType):e.showToast({icon:"none",title:i.message,duration:6e3}),t.next=97;break;case 52:if("alipay"!=this.payType){t.next=97;break}if(n={},s={},"0"!=this.payWay&&"-1"!=this.payWay){t.next=62;break}return n={price:this.money,paymentMoney:this.money,orderID:this.orderID,orderSN:this.orderSN,userID:a.userID,isBuChaJia:0},t.next=59,(0,o.expressPrepareForAlipay)(n);case 59:s=t.sent,t.next=95;break;case 62:if("1"!=this.payWay){t.next=69;break}return n={orderID:this.orderID},t.next=66,(0,o.takeout_order_alipay)(n);case 66:s=t.sent,t.next=95;break;case 69:if("2"!=this.payWay){t.next=76;break}return n={orderID:this.orderID},t.next=73,(0,o.water_order_alipay)(n);case 73:s=t.sent,t.next=95;break;case 76:if("3"!=this.payWay){t.next=83;break}return n={orderID:this.orderID},t.next=80,(0,o.mall_alipay_app)(n);case 80:s=t.sent,t.next=95;break;case 83:if("4"!=this.payWay){t.next=90;break}return n={orderID:this.orderID},t.next=87,(0,o.mall_alipay_app)(n);case 87:s=t.sent,t.next=95;break;case 90:if("5"!=this.payWay){t.next=95;break}return n={orderID:this.orderID},t.next=94,(0,o.member_alipay_app)(n);case 94:s=t.sent;case 95:console.log(s," at components/popup-pay.vue:361"),1==s.status?this.payNow(s.data,this.payType):e.showToast({icon:"none",title:s.message,duration:6e3});case 97:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),payNow:function(t,a){console.log("支付类型："+a," at components/popup-pay.vue:382"),console.log(this.payWay," at components/popup-pay.vue:384");var r=this.payWay,o=this.orderID;console.log("支付数据："+JSON.stringify(t)," at components/popup-pay.vue:390"),e.requestPayment({provider:a,orderInfo:t,success:function(t){console.log("success:"+JSON.stringify(t)," at components/popup-pay.vue:397"),"0"==r?e.redirectTo({url:"/pages/express_list/express_list"}):1==r?e.redirectTo({url:"/pages/wai_mai_detail/wai_mai_detail?orderID="+o}):2==r?e.redirectTo({url:"/pages/service_order_list/service_order_list"}):3==r?e.redirectTo({url:"/pages/mall_order/mall_order"}):4==r?e.redirectTo({url:"/pages/mall_goods_list/mall_goods_list"}):5==r&&e.redirectTo({url:"/pages/tabbar/my/my"})},fail:function(e){console.log("fail:"+JSON.stringify(e)," at components/popup-pay.vue:434")}});console.log(weixin_sdk," at components/popup-pay.vue:440")},radioChange:function(e){console.log(e," at components/popup-pay.vue:538"),this.payType=e.detail.value},hide:function(){if("insert"!==this.mode||"middle"!==this.position){this.$emit("hidePopup");var t=this.payWay;"0"==t?e.redirectTo({url:"/pages/express_list/express_list"}):1==t?e.redirectTo({url:"/pages/wai_mai_detail/wai_mai_detail?orderID="+orderID}):2==t?e.redirectTo({url:"/pages/service_order_list/service_order_list"}):3==t?e.redirectTo({url:"/pages/mall_order/mall_order"}):4==t?e.redirectTo({url:"/pages/mall_goods_list/mall_goods_list"}):5==t&&e.redirectTo({url:"/pages/tabbar/my/my"})}},closeMask:function(){"insert"===this.mode&&this.$emit("hidePopup")},moveHandle:function(){}}};t.default=p}).call(this,a("6e42")["default"])},b828:function(e,t,a){"use strict";a.r(t);var r=a("8328"),o=a.n(r);for(var n in r)"default"!==n&&function(e){a.d(t,e,function(){return r[e]})}(n);t["default"]=o.a},bbd3:function(e,t,a){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/popup-pay-create-component',
    {
        'components/popup-pay-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("787f"))
        })
    },
    [['components/popup-pay-create-component']]
]);                
