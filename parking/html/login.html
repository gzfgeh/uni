<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>登录</title>
    <link rel="stylesheet" href="../css/mui.min.css">
    <link rel="stylesheet" href="../css/app.css">
	<style type="text/css">
			body,html{
				width: 100%;
				height: 100%;background: #ffffff;
			}
			
			.head_wrap{background: url(../images/login_head_bg.png) no-repeat;background-size: 100% 100%; padding-top: 20px;
				height: 215px;width: 100%; display: flex;flex-direction: column; align-items: center; justify-content: space-between;}
			.head_wrap .title{color: #333; font-size: 19px;}
			.head_wrap img{width: 114px; height: 114px;}
			.input_wrap{margin-left: 5%; width: 90%; box-sizing: border-box; border-radius: 3px; 
					background: #F2F2F2; height: 50px; margin-bottom: 30px;}
			.input_wrap input{border:none;background: #F2F2F2;height: 50px;}	
				
			::-webkit-input-placeholder{color: #999999;font-size: 14px;}
			
			.btn_wrap{margin-left: 5%; width: 90%;background: #0B2A47;color: #FFF; height: 50px;}
			.btn_wrap button{height: 50px; line-height: 50px; text-align: center; color: #FFFFFF; background-color: transparent;}
			
			.bottom{position: fixed;bottom: 20px; text-align: center;width: 100%; color: #0B2A47; font-size: 10px;}
		</style>
	

</head>

<body>
    <div class="mui-content">
		
		<div class="head_wrap">
			<span class="title">登录</span>
			<img src="../images/login_head_icon.png" >
		</div>
		
        <div class="input_wrap" style="margin-top:10%;">
            <input type="text"  placeholder="请输入账号">
        </div>
		
		<div class="input_wrap" >
            <input type="text"  placeholder="请输入密码">
        </div>
		
		
		<button type="button" class="mui-btn mui-btn-link btn_wrap" onclick="getCode();">登录</button>
		
        <div class="bottom">猎科网络技术支持</div>

    </div>

</body>
<script type="text/javascript" src="../js/mui.min.js"></script>
<script src="../js/jquery-2.1.1.min.js"></script>
<script src="../js/app.js"></script>
<script src="html5plus://ready"></script>
<script type="text/javascript" charset="utf-8">
    mui.init();
    //键盘自动弹出
    var nativeWebview, imm, InputMethodManager;
    var initNativeObjects = function() {
        if (mui.os.android) {
            var main = plus.android.runtimeMainActivity();
            var Context = plus.android.importClass("android.content.Context");
            InputMethodManager = plus.android.importClass("android.view.inputmethod.InputMethodManager");
            imm = main.getSystemService(Context.INPUT_METHOD_SERVICE);
        } else {
            nativeWebview = plus.webview.currentWebview().nativeInstanceObject();
        }
    };
    var showSoftInput = function() {
        if (mui.os.android) {
            imm.toggleSoftInput(0, InputMethodManager.SHOW_FORCED);
        } else {
            nativeWebview.plusCallMethod({
                "setKeyboardDisplayRequiresUserAction": false
            });
        }
        setTimeout(function() {
            var inputElem = document.querySelector('input');
            inputElem.focus();
            inputElem.parentNode.classList.add('mui-active'); //第一个是search，加上激活样式
        }, 20);
    };
    mui.plusReady(function() {
        //自动弹出键盘
        // initNativeObjects();
        // showSoftInput();
        //checkPermission();
        fastQuit();
    });

    var backcount = 0;

    function fastQuit() {
        //双击退出登录
        mui.back = function() {
            //console.log(plus.webview.currentWebview().id);
            if (plus.webview.currentWebview().id == "login.html") {

                if (mui.os.ios) return;
                if (backcount > 0) {
                    if (window.plus) plus.runtime.quit();
                    return;
                };
                mui.toast("再按一次退出应用");
                backcount++;
                setTimeout(function() {
                    backcount = 0;
                }, 2000);
            }
        };
    }


    //检查权限
    function checkPermission() {
        if (mui.os.ios || (mui.os.android && parseFloat(mui.os.version) < 6.0)) {
            //...操作
            return;
        }
        var mainAct = plus.android.runtimeMainActivity();
        plus.android.invoke("org.qldc.xianghq.Tools", "initUtils", mainAct);
        var callBack = plus.android.implements("org.qldc.xianghq.Tools$CallBack", {
            "success": function() {},
            "failure": function() {
                plus.runtime.quit();
            }
        });
        //调用申请权限的静态方法
        //照相
        plus.android.invoke("org.qldc.xianghq.Tools", "permission", ["android.permission-group.CAMERA",
            "android.permission-group.STORAGE"
        ], callBack);

        //	plus.android.invoke("org.qldc.xianghq.Tools", "permission", ["android.permission-group.STORAGE"], callBack);
        //	//手机状态
        //	plus.android.invoke("org.qldc.xianghq.Tools", "permission", ["android.permission-group.PHONE"], callBack);
        //	//手机网络
        //	plus.android.invoke("org.qldc.xianghq.Tools", "permission", ["android.permission.INTERNET"], callBack);
        //	//手机定位
        //	plus.android.invoke("org.qldc.xianghq.Tools", "permission", ["android.permission-group.LOCATION"], callBack);

    }

    /**
     * 获取验证码
     */
    function getCode() {

        var val = $(".phone_input").val();
        var p1 = /^[1][3,4,5,6,7,8,9][0-9]{9}$/;

        if (p1.test(val) == false) {
            mui.toast("请输入正确的手机号");
            return;
        }

        mui.openWindow({
            url: 'getCode.html',
            id: 'getCode.html',
            waiting: {
                autoShow: false
            },
            extras: {
                phone: val
            }
        })


    }
</script>

</html>