(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-service_confirm-service_confirm"],{"2e44":function(t,e,i){"use strict";i.r(e);var n=i("3a11"),a=i("560d");for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);i("44ff");var o=i("2877"),r=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,"1b026032",null);e["default"]=r.exports},"3a11":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"contain"},[i("div",{staticClass:"header uni-between-item"},[i("div",{staticClass:"brand_wrap"},[i("img",{attrs:{src:t.company_logo}}),i("span",[t._v(t._s(t.company_name))])]),i("div",{staticClass:"price"},[i("span",[t._v(t._s(t.monthly_expense)+"元/月+"+t._s(t.mileage_expense)+"元/公里")]),i("span",{staticClass:"name"},[t._v("交强险 "+t._s(t.compulsory)+"元+车船税 "+t._s(t.tax)+"元")])])]),i("div",{staticClass:"address_wrap uni-between-item"},[i("span",[t._v("投保地区")]),i("span",[t._v(t._s(t.city_name))])]),i("div",{staticClass:"title uni-between-item"},[i("span",[t._v("商业险")]),i("span",{staticClass:"change",on:{click:function(e){e=t.$handleEvent(e),t.changeBill(e)}}},[t._v("调整")])]),i("div",{staticClass:"content_wrap"},[t._l(t.list,function(e,n){return[i("div",{key:n+"_0",staticClass:"content_item uni-between-item"},[i("div",{staticClass:"uni-between-item content_item_wrap"},["不投保"!=e.value?i("span",[t._v(t._s(e.name))]):t._e(),"不投保"!=e.value?i("span",{staticClass:"tag"},[t._v("不计免赔")]):i("span",[t._v(t._s(e.name))])]),i("div",[t._v(t._s(e.value))])])]})],2),t._m(0),i("div",{staticClass:"content_wrap"},[i("div",{staticClass:"content_item uni-between-item"},[i("span",[t._v("姓名")]),i("div",[t._v(t._s(t.name))])]),i("div",{staticClass:"content_item uni-between-item"},[i("span",[t._v("手机号")]),i("div",[t._v(t._s(t.trueMobile))])]),i("div",{staticClass:"content_item uni-between-item"},[i("span",[t._v("身份证号")]),i("div",[t._v(t._s(t.trueIdcard))])])]),t._m(1),i("div",{staticClass:"content_wrap",staticStyle:{"border-bottom":"2upx solid rgba(0,0,0,0.1)","padding-bottom":"60upx"}},[i("div",{staticClass:"content_item uni-between-item"},[i("span",[t._v("车牌号码")]),i("div",[t._v(t._s(t.license_no))])]),i("div",{staticClass:"content_item uni-between-item"},[i("span",[t._v("品牌型号")]),i("div",[t._v(t._s(t.brand))])]),i("div",{staticClass:"content_item uni-between-item"},[i("span",[t._v("车辆识别代码")]),i("div",[t._v(t._s(t.trueVin))])]),i("div",{staticClass:"content_item uni-between-item"},[i("span",[t._v("发动机号码")]),i("div",[t._v(t._s(t.trueEngineNo))])]),i("div",{staticClass:"content_item uni-between-item"},[i("span",[t._v("注册日期")]),i("div",[t._v(t._s(t.first_reg_date))])])]),i("div",{staticClass:"license"},[i("v-uni-radio",{attrs:{checked:t.isChecked,color:"#427DFF"},on:{click:function(e){e=t.$handleEvent(e),t.changeChecked(e)}}},[t._v("我已阅读并同意")]),i("v-uni-text",{staticClass:"link"},[t._v("《服务协议》")])],1),i("div",{staticClass:" button",on:{click:function(e){e=t.$handleEvent(e),t.next(e)}}},[t._v("我要投保")])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title uni-between-item"},[i("span",[t._v("车主信息")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title uni-between-item"},[i("span",[t._v("车辆信息")])])}];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"3c9a":function(t,e,i){"use strict";function n(t){var e=t.toString();return e[1]?e:"0".concat(e)}function a(t){var e=t.getFullYear(),i=t.getMonth()+1,a=t.getDate(),s=t.getHours(),o=t.getMinutes(),r=t.getSeconds(),c=[e,i,a].map(n).join("/"),d=[s,o,r].map(n).join(":");return"".concat(c," ").concat(d)}function s(t){var e=t;return 1==t.toString().length&&(e="0"+t),e}function o(t){var e,i="-",n=t.split(i),a=parseInt(n[0]);e=0==n[1].indexOf("0")?parseInt(n[1].substring(1)):parseInt(n[1]);var s=parseInt(n[2]),o=new Date(a,e-1,s);return o}function r(t,e){var i;i=e?o(e):new Date;var n=i.getTime()+864e5*t;i.setTime(n);var a=i.getFullYear(),r=i.getMonth(),c=i.getDate();return r=s(r+1),c=s(c),a+"-"+r+"-"+c}function c(t){return!(escape(t).indexOf("%u")<0)}function d(t,e,i,n){var a=[t,i],s=[e,n],o=6378137,r=(a[1]-a[0])*Math.PI/180,c=(s[1]-s[0])*Math.PI/180,d=Math.sin(r/2)*Math.sin(r/2)+Math.cos(a[0]*Math.PI/180)*Math.cos(a[1]*Math.PI/180)*Math.sin(c/2)*Math.sin(c/2),l=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),u=o*l;return Math.round(u)}function l(){var t=window.navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)}Object.defineProperty(e,"__esModule",{value:!0}),e.formatTime=a,e.getDay=r,e.isChinese=c,e.getDistance=d,e.isWeiXin=l,e.default=void 0;var u={formatNumber:n,formatTime:a,getDay:r,isWeiXin:l};e.default=u},"44ff":function(t,e,i){"use strict";var n=i("90e8"),a=i.n(n);a.a},"560d":function(t,e,i){"use strict";i.r(e);var n=i("e56d"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=a.a},"90e8":function(t,e,i){var n=i("c512");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("738431df",n,!0,{sourceMap:!1,shadowMode:!1})},c512:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".contain[data-v-1b026032]{width:100%}.header[data-v-1b026032]{margin-top:%?60?%;width:100%;padding:%?0?% %?40?%;-webkit-box-sizing:border-box;box-sizing:border-box}.brand_wrap[data-v-1b026032]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.brand_wrap img[data-v-1b026032]{width:%?124?%;height:%?34?%}.brand_wrap span[data-v-1b026032]{color:#000;font-size:%?32?%}.price[data-v-1b026032]{color:red;font-size:%?32?%;text-align:right;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.price .name[data-v-1b026032]{font-size:%?28?%;color:#bbb}.address_wrap[data-v-1b026032]{width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;padding:%?40?%;font-size:%?30?%;color:#676767}.title[data-v-1b026032]{border-left:#427dff %?10?% solid;padding:%?0?% %?30?%;font-size:%?34?%;color:#3d3d3d;font-weight:600;background-color:#f9f9f9;height:%?70?%;line-height:%?70?%;-webkit-box-sizing:border-box;box-sizing:border-box}.change[data-v-1b026032]{text-align:right;color:#427dff;font-size:%?28?%}.content_wrap[data-v-1b026032]{width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#fff;padding:%?10?% %?40?% %?30?%;font-size:%?30?%;color:#676767}.content_item[data-v-1b026032]{margin-top:%?10?%}.content_item_wrap[data-v-1b026032]{min-width:%?300?%}.content_item_wrap span[data-v-1b026032]:first-child{min-width:%?200?%}.content_item .tag[data-v-1b026032]{font-size:%?20?%;color:#ff4242;background-color:#fff2ec;border-radius:%?6?%;padding:%?0?% %?10?%;margin-left:%?32?%}.license[data-v-1b026032]{padding:%?20?% %?40?% %?0?%;border-top:%?1?% solid #e4e4e4;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;color:#292929;font-size:%?28?%}.link[data-v-1b026032]{color:#427dff}.button[data-v-1b026032]{margin:%?40?% 5%;width:90%;height:%?94?%;line-height:%?94?%;color:#fff;background-color:#427dff;border-radius:%?10?%;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box}uni-checkbox .wx-checkbox-input[data-v-1b026032]{border-radius:50%;/* 圆角 */width:%?30?%; /* 背景的宽 */height:%?30?% /* 背景的高 */}\n\t/* 选中后的 背景样式 （红色背景 无边框 可根据UI需求自己修改） */uni-checkbox .wx-checkbox-input.wx-checkbox-input-checked[data-v-1b026032]{border:none;background:#427dff;padding:%?3?%}\n\t/* 选中后的 对勾样式 （白色对勾 可根据UI需求自己修改） */uni-checkbox .wx-checkbox-input.wx-checkbox-input-checked[data-v-1b026032]:before{border-radius:50%;/* 圆角 */width:%?30?%;/* 选中后对勾大小，不要超过背景的尺寸 */height:%?30?%;/* 选中后对勾大小，不要超过背景的尺寸 */line-height:%?30?%;text-align:center;font-size:%?20?%; /* 对勾大小 30upx */color:#fff; /* 对勾颜色 白色 */background:rgba(0,0,0,0);-ms-transform:translate(-50%,-50%) scale(1);transform:translate(-50%,-50%) scale(1);-webkit-transform:translate(-50%,-50%) scale(1)}",""])},e56d:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("a34a")),a=i("4dd9"),s=i("3c9a");function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i,n,a,s,o){try{var r=t[s](o),c=r.value}catch(d){return void i(d)}r.done?e(c):Promise.resolve(c).then(n,a)}function c(t){return function(){var e=this,i=arguments;return new Promise(function(n,a){var s=t.apply(e,i);function o(t){r(s,n,a,o,c,"next",t)}function c(t){r(s,n,a,o,c,"throw",t)}o(void 0)})}}var d={data:function(){return{global:{},item:{quote_details:{excluding:!0,liability:"不投保",driver_seat:"不投保",passenger_seat:"不投保"}},quote_result:{},trueMobile:"",trueIdcard:"",name:"",license_no:"",brand:"",trueVin:"",trueEngineNo:"",first_reg_date:"",city_name:"",monthly_expense:"",mileage_expense:"",compulsory:"",tax:"",list:[],isChecked:!1,companyNameList:["安盛天平","天安财险","大地保险"],companyLogo:[a.BASE_IMAGE_URL+"an_sheng.png",a.BASE_IMAGE_URL+"tian_an.png",a.BASE_IMAGE_URL+"da_di.png"],company_logo:"",company_name:"",quotation_id:""}},methods:{changeChecked:function(){this.isChecked=!this.isChecked},next:function(){if(this.isChecked){var t=uni.getStorageSync("openid");if(console.log(t),(0,s.isWeiXin)()||uni.removeStorageSync("openid"),t){var e="../pay_address/pay_address?quotation_id="+this.quotation_id;uni.navigateTo({url:e})}else if((0,s.isWeiXin)()){var i=this.$root.$mp.query.partner_id,n=this.$root.$mp.query.imei;window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx49aad3a138063b53&redirect_uri=https://api.kaikaibao.com.cn/3.1/getoauth?redit_url=https%3a%2f%2fm.kaikaibao.com.cn%2flccx2%2findex.html%23%2fpages%2fpay_address%2fpay_address%3fquotation_id%3d"+this.quotation_id+"%26partner_id%3d"+i+"%26imei%3d"+n+"&response_type=code&scope=snsapi_base&state=1&connect_redirect=1#wechat_redirect"}else{var a="../pay_address/pay_address?quotation_id="+this.quotation_id;uni.navigateTo({url:a})}}else wx.showToast({icon:"none",title:"请同意服务协议",duration:1e3})},changeBill:function(){var t="../quote_bill/quote_bill";wx.navigateTo({url:t})},applyUnderwrite:function(){var t=c(n.default.mark(function t(){var e,i;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isChecked){t.next=3;break}return wx.showToast({icon:"none",title:"请同意服务协议",duration:1e3}),t.abrupt("return");case 3:return e={insurer:"ASTP",biz_id:"54097031",channel_code:"QUANLIAN_PROXY_INSURE",address_name:this.global.name,address_mobile:this.global.mobile,address_details:"路",address_county:"110112",address_city:"110100",address_province:"110000",policy_email:"caingougou@qq.com"},t.next=6,(0,a.applyUnderwrite)(e);case 6:i=t.sent,200==i.code&&1==i.data.state&&(this.monthly_expense=this.item.monthly_expense,this.mileage_expense=this.item.mileage_expense,this.compulsory=parseInt(this.item.compulsory),this.compulsory=this.compulsory?this.compulsory:"",this.tax=parseInt(this.item.tax),this.tax=this.tax?this.tax:"",uni.setStorageSync("global",this.global),this.next());case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getQuotations:function(){var t=c(n.default.mark(function t(){var e,i;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.getQuotations)(this.quotation_id);case 2:e=t.sent,200==e.code&&(this.item=e.data,this.item.company&&("ASTP"==this.item.company?(this.company_name=this.companyNameList[0],this.company_logo=this.companyLogo[0]):"TAIC"==this.item.company?(this.company_name=this.companyNameList[1],this.company_logo=this.companyLogo[1]):(this.item.company,this.company_name=this.companyNameList[2],this.company_logo=this.companyLogo[2])),this.monthly_expense=this.item.monthly_expense,this.mileage_expense=this.item.mileage_expense,this.compulsory=parseInt(this.item.compulsory),this.compulsory=this.compulsory?this.compulsory:"",this.tax=parseInt(this.item.tax),this.tax=this.tax?this.tax:"",this.city_name=this.item.city_name,console.log(this.item.quote_details),this.item.quote_details=JSON.parse(this.item.quote_details),console.log(this.item.quote_details),this.item.quote_details?(this.list=[],i=this,Object.keys(this.item.quote_details).forEach(function(t){i.item.quote_details[t];var e={};"burn"==t?e.name="自燃险":"destroy"==t?e.name="车损险":"stolen"==t?e.name="盗抢险":"liability"==t?e.name="第三者责任险":"driver_seat"==t?e.name="司机座位险":"passenger_seat"==t?e.name="乘客座位险":"stolen"==t?e.name="盗抢险":"glasses"==t?e.name="玻璃险":"scratch"==t?e.name="刮痕险":"water"==t?e.name="涉水险":"escape"==t?e.name="无法找到第三方险":"lights"==t?e.name="车灯险":"compulsory"==t?e.name="交强险":"no_3rd_party"==t&&(e.name="无法找到第三方特约险"),"boolean"==typeof i.item.quote_details[t]&&i.item.quote_details[t]?e.value="投保":"boolean"==typeof i.item.quote_details[t]&&0==i.item.quote_details[t]?e.value="不投保":"glasses"==t?e.value=1==i.item.quote_details[t]?"国产玻璃":"进口玻璃":(e.value=parseInt(i.item.quote_details[t]),e.value>1e4&&(e.value=e.value/1e4+"万")),"excluding"==t||"compulsory"==t||"boolean"==typeof i.item.quote_details[t]&&0==i.item.quote_details[t]||i.list.push(e)})):this.item.quote_details.excluding=!0,console.log("this.item.quote_details"),console.log(this.item.name),this.name=this.item.name,this.item.mobile&&(this.trueMobile=this.item.mobile.substring(0,3)+"****"+this.item.mobile.substring(7,11)),this.item.idcard&&(this.trueIdcard=this.item.idcard.substring(0,3)+"***********"+this.item.idcard.substring(14,18)),this.item.vin&&(this.trueVin=this.item.vin.substring(0,3)+"***********"+this.item.vin.substring(this.item.vin.length-3,this.item.vin.length)),this.item.engine_no&&(this.trueEngineNo=this.item.engine_no.substring(0,1)+"****"+this.item.engine_no.substring(this.item.engine_no.length-1,this.item.engine_no.length)),this.license_no=this.item.license_no,this.brand=this.item.brand,this.first_reg_date=this.item.first_reg_date,console.log(this.item),console.log("this.item.quote_details"),console.log(this.item),this.$forceUpdate());case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),H5login:function(){var t=c(n.default.mark(function t(){var e,i,s,o,r;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$root.$mp.query.partner_id,i=this.$root.$mp.query.imei,uni.setStorageSync("partner_id",e),uni.setStorageSync("imei",i),s={partner_id:e,imei:i},t.next=7,(0,a.H5login)(s);case 7:o=t.sent,200==o.code&&(r=o.data.token,console.log(r),r&&uni.setStorageSync("token",r),this.getQuotations());case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},onLoad:function(){this.global=uni.getStorageSync("global"),this.quotation_id=this.$root.$mp.query.quotation_id;var t=uni.getStorageSync("openid");t||(t=this.$root.$mp.query.openid,t&&uni.setStorageSync("openid",t)),this.H5login()}};e.default=d}}]);